# 📱 PWA 설치 및 테스트 가이드

## 🎯 현재 상황
- ✅ 모바일 서버 실행 중: `http://localhost:5012`
- ✅ PWA 매니페스트 설정 완료
- ✅ 서비스 워커 활성화
- ✅ 자동 설치 배너 구현

---

## 📱 **모바일에서 PWA 설치 방법**

### 1️⃣ **PC의 IP 주소 확인**
```bash
# Windows PowerShell에서
ipconfig
```
**무선 LAN 어댑터의 IPv4 주소**를 확인하세요.
예: `192.168.123.100`

### 2️⃣ **모바일에서 접속**
- **안드로이드**: `http://192.168.123.100:5012`
- **iPhone**: `http://192.168.123.100:5012`

### 3️⃣ **설치 방법별 안내**

#### 🤖 **안드로이드 Chrome**
1. 웹사이트 접속 후 **2초 대기**
2. **"앱 설치하기"** 배너 자동 표시
3. **"📱 앱 설치하기"** 버튼 터치
4. **"설치"** 확인
5. 홈 화면에 앱 아이콘 추가됨

#### 🍎 **iPhone Safari**
1. 웹사이트 접속
2. 하단 **공유 버튼** (↗️) 터치
3. **"홈 화면에 추가"** 선택
4. **"추가"** 터치
5. 홈 화면에 앱 아이콘 추가됨

#### 💻 **데스크톱 Chrome/Edge**
1. 주소창 오른쪽 **설치 아이콘** (⬇️) 클릭
2. 또는 메뉴 > **"도깨비장터 설치"**
3. **"설치"** 버튼 클릭

---

## 🔧 **PWA 설치가 안 될 때**

### ❓ **문제 해결**

#### 1. **IP 연결 문제**
```bash
# 방화벽 확인
# Windows Defender > 허용되는 앱 > Flask 추가

# 또는 간단한 방법: 같은 WiFi 사용 확인
```

#### 2. **브라우저 호환성**
- ✅ **잘 됨**: Chrome, Edge, Firefox
- ⚠️ **제한적**: Safari (iOS만)
- ❌ **안 됨**: Internet Explorer

#### 3. **HTTPS 요구사항**
- **localhost**: PWA 설치 가능 ✅
- **IP 주소**: 기본 기능만 (설치 제한적) ⚠️
- **HTTPS**: 모든 기능 지원 ✅

### 🛠️ **강제 설치 배너 활성화**
현재 템플릿에서 **2초 후 자동으로 설치 배너**가 표시됩니다.
만약 안 보이면:

1. **F12** (개발자 도구) 열기
2. **Console** 탭에서 확인:
   ```javascript
   // 강제로 배너 표시
   document.getElementById('install-banner').classList.add('show');
   ```

---

## 🧪 **PWA 기능 테스트**

### ✅ **설치 후 확인사항**

#### 1. **앱 아이콘**
- 홈 화면에 **도깨비장터** 아이콘 생성
- 앱 이름: "도깨비장터"
- 아이콘: 보라색 그라디언트 + 🧚

#### 2. **앱 실행**
- 홈 화면 아이콘 터치
- **네이티브 앱처럼** 전체화면 실행
- 브라우저 주소창 없음

#### 3. **오프라인 모드**
- WiFi 끄기
- 앱 실행 → **기본 화면 표시됨**
- "오프라인 모드" 메시지 확인

#### 4. **푸시 알림** (예정)
- 새 메시지 알림
- 시스템 상태 알림

---

## 🎮 **실제 테스트 시나리오**

### 📱 **Step 1: 모바일 접속**
1. 스마트폰에서 **크롬 브라우저** 열기
2. 주소창에 `http://[PC_IP]:5012` 입력
3. **2초 대기** → 설치 배너 확인

### 📲 **Step 2: PWA 설치**
1. **"📱 앱 설치하기"** 버튼 터치
2. 설치 확인 대화상자에서 **"설치"** 선택
3. 홈 화면에 아이콘 추가 확인

### 🎯 **Step 3: 앱 기능 테스트**
1. 홈 화면에서 **도깨비장터** 앱 실행
2. 도깨비 선택 → 채팅 테스트
3. 탭 전환 (도깨비/채팅/통계) 테스트

### 📶 **Step 4: 오프라인 테스트**
1. WiFi 연결 해제
2. 앱 실행 → 기본 화면 표시 확인
3. WiFi 재연결 → 정상 기능 복구

---

## 💡 **팁 & 트릭**

### 🚀 **빠른 설치 방법**
```javascript
// 개발자 도구에서 실행
window.location.href = 'http://192.168.123.100:5012';
```

### 🔍 **PWA 상태 확인**
1. **F12** → **Application** 탭
2. **Manifest** 확인
3. **Service Workers** 상태 확인

### 📊 **성능 측정**
1. **Lighthouse** 실행
2. **PWA** 점수 확인
3. **성능 최적화** 제안 확인

---

## 🎉 **성공 시 나타나는 것들**

✅ **홈 화면에 앱 아이콘**  
✅ **전체화면 실행** (브라우저 UI 숨김)  
✅ **빠른 로딩** (캐시 활용)  
✅ **오프라인 지원** (기본 기능)  
✅ **설치 알림** (토스트 메시지)  

---

## 📞 **문제 발생 시**

### 🐛 **일반적인 문제**
1. **아이콘이 안 보임** → SVG 파일 확인
2. **설치 배너 없음** → HTTPS 또는 localhost 필요
3. **오프라인 안 됨** → 서비스 워커 등록 확인

### 🔧 **해결 방법**
```bash
# 서버 재시작
Ctrl+C (현재 서버 종료)
python goblin_mobile_app_v11.py

# 브라우저 캐시 삭제
Ctrl+Shift+R (하드 리프레시)
```

---

**🎭 도깨비마을장터 PWA와 함께 언제 어디서나 전문가 상담을 받아보세요!**

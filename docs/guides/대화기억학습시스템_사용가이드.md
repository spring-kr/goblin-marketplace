# 🧠 대화 기억/학습 시스템 v10.1 - 사용 가이드

## 📋 개요

이 시스템은 사용자와의 대화를 기억하고 학습하여 개인화된 응답을 제공하는 AI 대화 시스템입니다.

## ✨ 주요 기능

### 1. 대화 기록 관리
- 모든 대화 내용을 JSON 파일에 자동 저장
- 최근 100개 대화만 유지 (메모리 효율성)
- 자동 백업 및 복원 기능

### 2. 감정 분석 시스템
- **30가지 감정** 분석 지원
- 한국어 특화 감정 키워드 인식
- 실시간 감정 상태 추적

### 3. 학습 시스템
- **감정 패턴 학습**: 사용자의 주요 감정 상태 파악
- **키워드 학습**: 자주 사용하는 단어/표현 분석
- **시간 패턴 학습**: 대화하는 시간대 패턴 분석

### 4. 개인화 응답
- 사용자의 감정 패턴에 따른 맞춤형 응답
- 시간대별 인사말 자동 조정
- 이전 대화 맥락을 고려한 응답

## 🚀 설치 및 사용법

### 기본 사용법

```python
from conversation_memory_system import ConversationMemorySystem

# 시스템 초기화
memory_system = ConversationMemorySystem()

# 사용자 메시지 처리
user_message = "오늘 정말 기분이 좋아요!"
emotion = memory_system.analyze_user_patterns(user_message)
response = memory_system.get_personalized_response(emotion, user_message)

# 대화 기록 저장
memory_system.add_conversation(user_message, response, emotion)

print(f"감정: {emotion}")
print(f"응답: {response}")
```

### Flask 웹 애플리케이션 통합

```python
from flask import Flask, request, jsonify
from conversation_memory_system import ConversationMemorySystem

app = Flask(__name__)
memory_system = ConversationMemorySystem()

@app.route('/chat', methods=['POST'])
def chat():
    data = request.get_json()
    user_message = data.get('message', '')
    
    # 감정 분석 및 학습
    emotion = memory_system.analyze_user_patterns(user_message)
    
    # 개인화된 응답 생성
    bot_response = memory_system.get_personalized_response(emotion, user_message)
    
    # 대화 기록 저장
    memory_system.add_conversation(user_message, bot_response, emotion)
    
    return jsonify({
        'response': bot_response,
        'emotion': emotion,
        'stats': memory_system.get_user_stats()
    })

if __name__ == '__main__':
    app.run(debug=True)
```

## 📊 지원하는 감정 종류

### 기본 감정 (12가지)
1. **happy** - 기쁨/행복
2. **sad** - 슬픔/우울
3. **angry** - 분노/짜증
4. **amazed** - 놀람/감탄
5. **love** - 사랑/애정
6. **excited** - 흥미진진/기대
7. **worried** - 걱정/불안
8. **tired** - 피곤/지침
9. **grateful** - 감사/고마움
10. **confused** - 혼란/당황
11. **confident** - 자신감/당당
12. **shy** - 부끄러움/수줍음

### 감정별 키워드 예시

| 감정 | 키워드 예시 |
|------|-------------|
| happy | "기분 좋", "행복", "기뻐", "즐거", "최고", "ㅋㅋ" |
| sad | "슬프", "우울", "힘들", "속상", "눈물", "외로" |
| angry | "화나", "짜증", "열받", "빡쳐", "스트레스", "답답" |
| amazed | "놀라", "깜짝", "헐", "와", "대박", "신기" |

## 🗃️ 데이터 구조

### conversation_memory.json 파일 구조

```json
{
  "history": [
    {
      "timestamp": 1692000000.0,
      "user_message": "안녕하세요!",
      "bot_response": "안녕하세요! 좋은 아침이에요!",
      "emotion": "happy",
      "date": "2023-08-14 09:00:00"
    }
  ],
  "preferences": {
    "emotion_patterns": {
      "happy": 15,
      "excited": 8,
      "grateful": 5
    },
    "favorite_words": {
      "안녕": 10,
      "고마워": 5,
      "좋아": 8
    },
    "time_patterns": {
      "9": 12,
      "14": 8,
      "20": 15
    }
  },
  "last_updated": 1692000000.0,
  "version": "10.1"
}
```

## 📈 통계 및 분석

### 사용자 통계 확인

```python
stats = memory_system.get_user_stats()
print(f"총 대화 수: {stats['total_conversations']}")
print(f"가장 많은 감정: {stats['most_common_emotion']}")
print(f"자주 사용하는 단어: {stats['favorite_words']}")
print(f"가장 활발한 시간: {stats['most_active_hour']}시")
```

### 출력 예시
```
총 대화 수: 87
가장 많은 감정: happy
자주 사용하는 단어: {'안녕': 15, '고마워': 12, '좋아': 10}
가장 활발한 시간: 20시
```

## 🔧 고급 기능

### 1. 메모리 초기화
```python
memory_system.clear_memory()
```

### 2. 커스텀 메모리 파일
```python
memory_system = ConversationMemorySystem("custom_memory.json")
```

### 3. 수동 저장
```python
memory_system.save_memory()
```

### 4. 수동 로드
```python
memory_system.load_memory()
```

## 🎯 활용 사례

### 1. 고객 서비스 챗봇
- 고객의 감정 상태에 따른 맞춤형 응답
- 이전 문의 내역 기반 개인화 서비스
- 고객 만족도 향상

### 2. 교육용 AI 튜터
- 학습자의 감정 상태 모니터링
- 개인별 학습 패턴 분석
- 맞춤형 학습 콘텐츠 제공

### 3. 심리 상담 보조 시스템
- 사용자의 감정 변화 추적
- 장기적인 심리 상태 분석
- 전문가 상담 연계 지원

### 4. 게임 NPC 시스템
- 플레이어와의 상호작용 기억
- 감정에 따른 동적 스토리 전개
- 개인화된 게임 경험 제공

## 🔍 기술적 특징

### 성능 최적화
- **메모리 효율성**: 최근 100개 대화만 유지
- **자동 저장**: 10개 대화마다 자동 저장
- **빠른 감정 분석**: 키워드 기반 빠른 매칭

### 확장성
- **모듈화 설계**: 독립적인 클래스 구조
- **유연한 설정**: 커스터마이징 가능한 파라미터
- **API 친화적**: 웹 애플리케이션 쉬운 통합

### 안정성
- **예외 처리**: 모든 주요 기능에 예외 처리 적용
- **데이터 검증**: 입력 데이터 유효성 검사
- **백업 기능**: 자동 데이터 백업

## 🛠️ 개발자 가이드

### 새로운 감정 추가
```python
# analyze_korean_emotion 메서드에 새로운 감정 추가
elif any(word in text for word in ["새로운", "키워드", "목록"]):
    return "new_emotion"

# get_personalized_response 메서드에 응답 추가
"new_emotion": [
    "새로운 감정에 대한 응답1",
    "새로운 감정에 대한 응답2"
]
```

### 커스텀 학습 패턴 추가
```python
def analyze_user_patterns(self, text: str) -> str:
    # 기존 코드...
    
    # 새로운 패턴 학습 추가
    if "custom_patterns" not in self.user_preferences:
        self.user_preferences["custom_patterns"] = {}
    
    # 커스텀 분석 로직
    # ...
    
    return emotion
```

## 📞 지원 및 문의

- **버전**: v10.1
- **최종 업데이트**: 2025년 8월 23일
- **호환성**: Python 3.6+
- **의존성**: 표준 라이브러리만 사용 (json, os, time, typing)

## 📝 라이선스

이 시스템은 교육 및 연구 목적으로 자유롭게 사용할 수 있습니다.

---

*이 문서는 대화 기억/학습 시스템 v10.1의 완전한 사용 가이드입니다.*

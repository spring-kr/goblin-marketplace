<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë„ê¹¨ë¹„ë§ˆì„ì¥í„° - AI ë„ë©”ì¸ & ì—ì´ì „íŠ¸ êµ¬ë…</title>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .header p { font-size: 1.2em; opacity: 0.9; }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        
        .category-tabs {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .tab {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .tab.active {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .tab:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .product-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }
        
        .product-badge {
            position: absolute;
            top: 35px; /* í• ì¸/í”„ë¦¬ë¯¸ì—„ ë°°ì§€ ì•„ë˜ë¡œ ì´ë™ */
            right: 10px;
            background: #e74c3c;
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.7em;
            font-weight: bold;
            z-index: 2;
        }
        
        .product-badge.domain { background: #3498db; }
        .product-badge.agent { background: #f39c12; }
        
        /* ğŸ† í”„ë¦¬ë¯¸ì—„ ë„ë©”ì¸ ìŠ¤íƒ€ì¼ */
        .product-card.premium {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 140, 0, 0.1));
            border: 2px solid rgba(255, 215, 0, 0.5);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .product-card.premium::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: premium-shine 3s infinite;
        }
        
        @keyframes premium-shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            50% { transform: translateX(0%) translateY(0%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .product-card.premium .product-title {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.4em;
        }
        
        .product-card.premium .price {
            font-size: 1.6em;
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .product-card.premium .subscribe-btn {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #000;
            font-weight: bold;
            text-shadow: none;
        }
        
        .product-card.premium .subscribe-btn:hover {
            background: linear-gradient(45deg, #FFA500, #FFD700);
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.5);
        }
        
        /* ğŸ¯ Coming Soon ìŠ¤íƒ€ì¼ */
        .product-card.coming-soon {
            opacity: 0.7;
            position: relative;
        }
        
        .product-card.coming-soon::after {
            content: 'ê°œë°œì˜ˆì •';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .product-card.coming-soon .subscribe-btn {
            background: #95a5a6;
            cursor: not-allowed;
        }
        
        /* ğŸ† í”„ë¦¬ë¯¸ì—„ ë„ë©”ì¸ ìŠ¤íƒ€ì¼ë§ */
        .product-card.premium {
            background: linear-gradient(135deg, 
                rgba(255, 215, 0, 0.15) 0%,
                rgba(255, 165, 0, 0.15) 50%,
                rgba(255, 215, 0, 0.15) 100%);
            border: 2px solid #FFD700;
            box-shadow: 
                0 0 30px rgba(255, 215, 0, 0.4),
                0 4px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            transform: scale(1.02);
        }
        
        .product-card.premium::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent 30%,
                rgba(255, 215, 0, 0.2) 50%,
                transparent 70%
            );
            animation: premiumShine 4s infinite;
            pointer-events: none;
            z-index: 1;
        }
        
        .product-card.premium .product-title {
            color: #FFD700;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
            font-weight: bold;
            position: relative;
            z-index: 2;
            margin-top: 15px; /* í”„ë¦¬ë¯¸ì—„ ë°°ì§€ì™€ ê°„ê²© í™•ë³´ */
        }
        
        .product-card.premium .price {
            color: #FFD700;
            font-size: 1.4em;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
            font-weight: bold;
            position: relative;
            z-index: 2;
        }
        
        .product-card.premium .subscribe-btn {
            background: linear-gradient(45deg, #FFD700, #FF8C00, #FFD700);
            background-size: 200% 200%;
            color: #000;
            font-weight: bold;
            text-shadow: none;
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
            animation: goldGlow 3s infinite;
        }
        
        .product-card.premium .subscribe-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.7);
            background-position: 100% 100%;
        }
        
        /* í”„ë¦¬ë¯¸ì—„ ì „ìš© ì»¨í…ì¸  ì˜ì—­ íŒ¨ë”© */
        .product-card.premium .product-content {
            padding-top: 50px; /* í”„ë¦¬ë¯¸ì—„ì€ ë” í° íŒ¨ë”© */
        }
        
        @keyframes premiumShine {
            0% { transform: translateX(-120%) translateY(-120%) rotate(45deg); }
            100% { transform: translateX(120%) translateY(120%) rotate(45deg); }
        }
        
        @keyframes goldGlow {
            0%, 100% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
        }
        
        /* ğŸ¯ í”„ë¦¬ë¯¸ì—„ ì¹´ë“œ ì»¨í…ì¸  ì˜ì—­ ì¡°ì • */
        .product-card.premium .product-content {
            padding-top: 45px !important; /* í”„ë¦¬ë¯¸ì—„ ë°°ì§€ ì œê±°ë¡œ ì¼ë°˜ê³¼ ë™ì¼ */
        }
        
        /* ì¼ë°˜ ì¹´ë“œ ì»¨í…ì¸  ì˜ì—­ ì¡°ì • */
        .product-card .product-content {
            padding-top: 45px; /* ì¼ë°˜ ë°°ì§€ë“¤ì„ ìœ„í•œ ê³µê°„ */
        }
        
        /* í• ì¸ ë°°ì§€ ìœ„ì¹˜ ì¡°ì • */
        .discount-badge {
            position: absolute;
            top: 3px;
            left: 3px;
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 0.6em;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(231, 76, 60, 0.4);
            z-index: 3;
            animation: discountPulse 2s infinite;
        }
        
        /* í”„ë¦¬ë¯¸ì—„ ë°°ì§€ ìœ„ì¹˜ ì¡°ì • */
        .premium-badge {
            position: absolute;
            top: 3px;
            right: 3px;
            background: linear-gradient(45deg, #FFD700, #FF8C00);
            color: #000;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 0.6em;
            font-weight: bold;
            z-index: 4; /* ê°€ì¥ ìœ„ì— í‘œì‹œ */
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.5);
        }
        
        /* ì œí’ˆ ì¹´ë“œ ë‚´ìš© ì˜ì—­ ì¡°ì • */
        .product-card .product-content {
            padding-top: 40px; /* ë°°ì§€ë“¤ì„ ìœ„í•œ ê³µê°„ í™•ë³´ */
        }
        
        @keyframes discountPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .product-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #fff;
        }
        
        .product-description {
            opacity: 0.9;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .product-features {
            margin: 15px 0;
        }
        
        .product-features li {
            margin: 5px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .product-features li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #2ecc71;
            font-weight: bold;
        }
        
        .product-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0 15px 0;
            padding: 15px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .price {
            font-size: 1.4em;
            font-weight: bold;
            color: #2ecc71;
        }
        
        .original-price {
            text-decoration: line-through;
            opacity: 0.6;
            margin-right: 10px;
        }
        
        .subscribe-btn {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            width: 100%;
        }
        
        .subscribe-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
        }
        
        .cart {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            min-width: 200px;
        }
        
        .cart-count {
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9em;
            margin-left: 10px;
        }
        
        .hidden { display: none; }
        
        .checkout-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            backdrop-filter: blur(10px);
        }
        
        .form-group {
            margin: 15px 0;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }
        
        .checkout-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1em;
            width: 100%;
            margin-top: 20px;
        }
        
        .total-price {
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            color: #2ecc71;
        }
        
        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .payment-method {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
            text-align: center;
        }
        
        .payment-method:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .payment-method.selected {
            border-color: #2ecc71;
            background: rgba(46, 204, 113, 0.2);
        }
        
        .payment-method img {
            height: 40px;
            margin-bottom: 10px;
        }
        
        #card-element {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .payment-loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .payment-success {
            display: none;
            background: rgba(46, 204, 113, 0.2);
            border: 2px solid #2ecc71;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }
        
        .payment-error {
            display: none;
            background: rgba(231, 76, 60, 0.2);
            border: 2px solid #e74c3c;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            color: #e74c3c;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ® ë„ê¹¨ë¹„ë§ˆì„ì¥í„°</h1>
    </div>

    <div class="cart">
        <strong>ğŸ›ï¸ ì¥ë°”êµ¬ë‹ˆ</strong>
        <span class="cart-count" id="cartCount">0</span>
        <div id="cartItems" style="margin-top: 10px; max-height: 200px; overflow-y: auto;"></div>
        <button onclick="showCheckout()" style="margin-top: 10px; padding: 8px 15px; background: #2ecc71; color: white; border: none; border-radius: 5px; cursor: pointer;">ê²°ì œí•˜ê¸°</button>
    </div>

    <div class="container">
        <div class="category-tabs">
            <div class="tab active" data-category="all" onclick="switchCategory('all', this)">ğŸŒŸ ì „ì²´</div>
            <div class="tab" data-category="domains" onclick="switchCategory('domains', this)">ğŸ¤– AI ë„ë©”ì¸</div>
            <div class="tab" data-category="agents" onclick="switchCategory('agents', this)">ğŸ‘¨â€ğŸ’¼ AI ì—ì´ì „íŠ¸</div>
            <div class="tab" data-category="premium" onclick="switchCategory('premium', this)">ğŸ† í”„ë¦¬ë¯¸ì—„</div>
        </div>
        
        <div class="products-grid" id="productsGrid">
            <!-- ì œí’ˆë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>
        </div>

        <div id="productsContainer" class="products-grid">
            <!-- ì œí’ˆë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
        </div>

        <div id="checkoutSection" class="checkout-section hidden">
            <h2>ğŸ›ï¸ ì£¼ë¬¸ ì •ë³´</h2>
            <div id="orderSummary"></div>
            
            <div class="total-price" id="totalPrice">ì´ ê¸ˆì•¡: $0/ì›”</div>
            
            <div class="payment-methods">
                <div class="payment-method selected" onclick="selectPaymentMethod('card', this)">
                    <div style="font-size: 2em;">ğŸ’³</div>
                    <div>ì‹ ìš©ì¹´ë“œ</div>
                    <small>Visa, Mastercard, AMEX</small>
                </div>
                <div class="payment-method" onclick="selectPaymentMethod('paypal', this)">
                    <div style="font-size: 2em;">ğŸ’™</div>
                    <div>PayPal</div>
                    <small>ì•ˆì „í•œ PayPal ê²°ì œ</small>
                </div>
                <div class="payment-method" onclick="selectPaymentMethod('bank', this)">
                    <div style="font-size: 2em;">ğŸ¦</div>
                    <div>ê³„ì¢Œì´ì²´</div>
                    <small>í•œêµ­ ì€í–‰ ê³„ì¢Œ</small>
                </div>
            </div>
            
            <div class="payment-error" id="paymentError"></div>
            
            <form id="checkoutForm">
                <div class="form-group">
                    <label>ì´ë¦„ *</label>
                    <input type="text" id="customerName" required>
                </div>
                <div class="form-group">
                    <label>ì´ë©”ì¼ *</label>
                    <input type="email" id="customerEmail" required>
                </div>
                <div class="form-group">
                    <label>íšŒì‚¬ëª…</label>
                    <input type="text" id="customerCompany">
                </div>
                
                <!-- ì‹ ìš©ì¹´ë“œ ê²°ì œ í¼ -->
                <div id="cardPaymentForm">
                    <div class="form-group">
                        <label>ì‹ ìš©ì¹´ë“œ ì •ë³´</label>
                        <div id="card-element">
                            <!-- Stripe Elementsê°€ ì—¬ê¸°ì— ì‚½ì…ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                </div>
                
                <!-- ê³„ì¢Œì´ì²´ ì •ë³´ -->
                <div id="bankPaymentForm" style="display: none;">
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 15px 0;">
                        <h4>ğŸ“‹ ê³„ì¢Œì´ì²´ ì •ë³´</h4>
                        <p><strong>ì€í–‰:</strong> êµ­ë¯¼ì€í–‰</p>
                        <p><strong>ê³„ì¢Œë²ˆí˜¸:</strong> 123-456-789012</p>
                        <p><strong>ì˜ˆê¸ˆì£¼:</strong> HYOJIN.AI</p>
                        <small style="color: #f39c12;">âš ï¸ ì…ê¸ˆ í›„ ì´ë©”ì¼ë¡œ ì…ê¸ˆí™•ì¸ì„œë¥¼ ë³´ë‚´ì£¼ì„¸ìš”.</small>
                    </div>
                </div>
                
                <div class="payment-loading" id="paymentLoading">
                    <div style="font-size: 2em; margin-bottom: 10px;">â³</div>
                    <div>ê²°ì œë¥¼ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
                </div>
                
                <div class="payment-success" id="paymentSuccess">
                    <div style="font-size: 3em; margin-bottom: 15px;">ğŸ‰</div>
                    <h3>ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h3>
                    <p>êµ¬ë… ì„œë¹„ìŠ¤ê°€ ê³§ í™œì„±í™”ë©ë‹ˆë‹¤.</p>
                    <div id="subscriptionDetails"></div>
                    
                    <!-- ğŸ¯ STEMê¸‰ ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤ ì—°ê²° -->
                    <div id="stemAgentAccess" style="display: none; margin-top: 30px; padding: 25px; background: rgba(255,255,255,0.15); border-radius: 15px; border: 2px solid rgba(255,255,255,0.3);">
                        <div style="font-size: 2.5em; margin-bottom: 15px;">ğŸ¯</div>
                        <h3 style="color: #fff; margin-bottom: 15px;">STEMê¸‰ ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤ ì´ìš©</h3>
                        <p style="color: #f0f0f0; margin-bottom: 20px;">ë°•ì‚¬ê¸‰ì—ì„œ ê³ ë¸”ë¦°ìœ¼ë¡œ ì§„í™”í•œ 31ê°œ AI ì „ë¬¸ê°€ì™€ ëŒ€í™”í•˜ì„¸ìš”!</p>
                        
                        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin: 20px 0;">
                            <h4 style="color: #fff; margin-bottom: 10px;">ğŸ”‘ êµ¬ë… í† í°</h4>
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <input type="text" id="accessToken" readonly style="flex: 1; padding: 12px; border: 2px solid #4CAF50; border-radius: 8px; background: #fff; font-family: 'Courier New', monospace; font-size: 16px; color: #333;">
                                <button onclick="copyToken()" style="padding: 12px 20px; background: #4CAF50; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">ğŸ“‹ ë³µì‚¬</button>
                            </div>
                            <p style="color: #f39c12; font-size: 0.9em;">âš ï¸ ì´ í† í°ì€ STEMê¸‰ ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤ ë¡œê·¸ì¸ì— í•„ìš”í•©ë‹ˆë‹¤. ì•ˆì „í•˜ê²Œ ë³´ê´€í•˜ì„¸ìš”.</p>
                        </div>
                        
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                            <h4 style="color: #fff; margin-bottom: 15px;">ğŸ† ì´ìš© ê°€ëŠ¥í•œ STEMê¸‰ ì—ì´ì „íŠ¸</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; font-size: 0.9em;">
                                <div style="color: #f0f0f0;">ğŸ§® ìˆ˜í•™ ì²œì¬ ê³ ë¸”ë¦°</div>
                                <div style="color: #f0f0f0;">âš—ï¸ ë¬¼ë¦¬í•™ ë§ˆìŠ¤í„°</div>
                                <div style="color: #f0f0f0;">ğŸ§ª í™”í•™ ì „ë¬¸ê°€</div>
                                <div style="color: #f0f0f0;">ğŸ§¬ ìƒë¬¼í•™ ì²œì¬</div>
                                <div style="color: #f0f0f0;">âš™ï¸ ê³µí•™ ë§ˆë²•ì‚¬</div>
                                <div style="color: #f0f0f0;">ğŸ¤– AI ì–´ì‹œìŠ¤í„´íŠ¸</div>
                                <div style="color: #f0f0f0;">ğŸ“Š ë§ˆì¼€íŒ… ì „ëµê°€</div>
                                <div style="color: #f0f0f0;">ğŸš€ ìŠ¤íƒ€íŠ¸ì—… ì»¨ì„¤í„´íŠ¸</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 25px;">
                            <button onclick="goToStemService()" style="width: 100%; padding: 18px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s ease;">
                                ğŸ¯ STEMê¸‰ ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤ ì´ìš©í•˜ê¸°
                            </button>
                            <p style="color: #f0f0f0; text-align: center; margin-top: 10px; font-size: 0.9em;">
                                â†‘ í´ë¦­í•˜ì—¬ ì „ë¬¸ AI ì—ì´ì „íŠ¸ë“¤ê³¼ ëŒ€í™”ë¥¼ ì‹œì‘í•˜ì„¸ìš”
                            </p>
                        </div>
                        
                        <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px; font-size: 0.9em;">
                            <h5 style="color: #fff; margin-bottom: 8px;">ğŸ“‹ ì´ìš© ì•ˆë‚´</h5>
                            <ul style="color: #f0f0f0; margin: 0; padding-left: 20px;">
                                <li>í† í°ì„ ë³µì‚¬í•˜ì—¬ STEMê¸‰ ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤ì— ë¡œê·¸ì¸</li>
                                <li>31ê°œ ì „ë¬¸ ë¶„ì•¼ ì—ì´ì „íŠ¸ ì¤‘ ììœ  ì„ íƒ</li>
                                <li>ë¬´ì œí•œ ì§ˆë¬¸ ë° ì „ë¬¸ì ì¸ ë‹µë³€ ì œê³µ</li>
                                <li>êµ¬ë… ê¸°ê°„ ë™ì•ˆ ì–¸ì œë“ ì§€ ì´ìš© ê°€ëŠ¥</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="checkout-btn" id="submitBtn">
                    ï¿½ ê²°ì œí•˜ê¸°
                </button>
            </form>
        </div>
    </div>

    <script>
        // ìƒí’ˆ ë°ì´í„° - í”„ë¦¬ë¯¸ì—„ ë„ë©”ì¸ ê°€ê²© ì ìš©
        const products = {
            domains: [
                // ğŸ† í”„ë¦¬ë¯¸ì—„ ë„ë©”ì¸ (ìµœê³ ê°€)
                {
                    id: 'interdisciplinary-ai',
                    name: 'ğŸ”¬ í•™ì œê°„ ìœµë³µí•© AI ë„ë©”ì¸',
                    description: 'ì„¸ê³„ ìµœì´ˆ ì§„ì •í•œ í•™ì œê°„ ìœµë³µí•© AI ì‹œìŠ¤í…œ - ë‹¤ëª¨ë‹¬ ë°ì´í„° ì²˜ë¦¬, ì–‘ì ì»´í“¨íŒ… í†µí•©',
                    features: ['ë‹¤ëª¨ë‹¬ ë°ì´í„° ì²˜ë¦¬', 'í•™ì œê°„ íŒ¨í„´ ë¶„ì„', 'ë„ë©”ì¸ê°„ ì§€ì‹ ìœµí•©', 'ìë™ ë…¼ë¬¸ ìƒì„±', 'ì—°êµ¬ í˜‘ì—… ì—”ì§„', 'ì–‘ì ì»´í“¨íŒ… í†µí•©'],
                    price: 999,
                    originalPrice: 199,
                    type: 'domain',
                    premium: true
                },
                {
                    id: 'medical-ai',
                    name: 'ğŸ¥ ì˜ë£Œ AI ë„ë©”ì¸',
                    description: 'HIPAA ì¤€ìˆ˜ ì˜ë£Œì§„ë‹¨ AI - ìƒëª…ê³¼ ì§ê²°ë˜ëŠ” critical ì˜ë£Œ ì‹œìŠ¤í…œ',
                    features: ['HIPAA ì¤€ìˆ˜', 'ì˜ë£Œì§„ë‹¨ AI', 'í™˜ì ë°ì´í„° ë¶„ì„', 'ì¹˜ë£Œ ê³„íš ìˆ˜ë¦½', 'ì•½ë¬¼ ìƒí˜¸ì‘ìš© ë¶„ì„', 'ì˜ë£Œì˜ìƒ ë¶„ì„'],
                    price: 599,
                    originalPrice: 199,
                    type: 'domain',
                    premium: true
                },
                
                // ğŸ·ï¸ ì¼ë°˜ ë„ë©”ì¸ (í‘œì¤€ê°€)
                {
                    id: 'finance-ai',
                    name: 'ğŸ’° ê¸ˆìœµ AI ë„ë©”ì¸',
                    description: 'SOX ì¤€ìˆ˜, íˆ¬ì ìœ„í—˜ ê´€ë¦¬, ê¸ˆìœµ ë¶„ì„ì„ ìœ„í•œ AI ì‹œìŠ¤í…œ',
                    features: ['SOX ì¤€ìˆ˜', 'ìœ„í—˜ í‰ê°€', 'íˆ¬ì ì „ëµ', 'ì‚¬ê¸° íƒì§€', 'ì‹ ìš© í‰ê°€'],
                    price: 199,
                    originalPrice: 299,
                    type: 'domain'
                },
                {
                    id: 'agriculture-ai',
                    name: 'ğŸŒ¾ ë†ì—… AI ë„ë©”ì¸',
                    description: 'ìŠ¤ë§ˆíŠ¸ ë†ì—…, ì‘ë¬¼ ëª¨ë‹ˆí„°ë§, ìˆ˜í™•ëŸ‰ ì˜ˆì¸¡ AI',
                    features: ['ì‘ë¬¼ ëª¨ë‹ˆí„°ë§', 'ìˆ˜í™•ëŸ‰ ì˜ˆì¸¡', 'í† ì–‘ ë¶„ì„', 'ë³‘í•´ì¶© íƒì§€', 'ë†ì¥ ê´€ë¦¬'],
                    price: 199,
                    originalPrice: 279,
                    type: 'domain'
                },
                {
                    id: 'energy-ai',
                    name: 'âš¡ ì—ë„ˆì§€ AI ë„ë©”ì¸',
                    description: 'ì—ë„ˆì§€ íš¨ìœ¨, ìŠ¤ë§ˆíŠ¸ ê·¸ë¦¬ë“œ, ì˜ˆì¸¡ ë¶„ì„ AI',
                    features: ['ì—ë„ˆì§€ íš¨ìœ¨', 'ê·¸ë¦¬ë“œ ìµœì í™”', 'ì˜ˆì¸¡ ë¶„ì„', 'ë¹„ìš© ì ˆê°'],
                    price: 199,
                    originalPrice: 269,
                    type: 'domain'
                },
                {
                    id: 'retail-ai',
                    name: 'ğŸ›’ ë¦¬í…Œì¼ AI ë„ë©”ì¸',
                    description: 'ê³ ê° ë¶„ì„, ì¬ê³  ê´€ë¦¬, ë§¤ì¶œ ì˜ˆì¸¡ AI',
                    features: ['ì¬ê³  ê´€ë¦¬', 'ë§¤ì¶œ ì˜ˆì¸¡', 'ê³ ê° ë¶„ì„', 'PCI ë³´ì•ˆ ê¸°ì¤€'],
                    price: 199,
                    originalPrice: 239,
                    type: 'domain'
                },
                {
                    id: 'entertainment-ai',
                    name: 'ğŸ® ì—”í„°í…Œì¸ë¨¼íŠ¸ AI',
                    description: 'ê²Œì„, ë¯¸ë””ì–´, ì½˜í…ì¸  ìƒì„±ì„ ìœ„í•œ AI',
                    features: ['ì½˜í…ì¸  ë¶„ì„', 'ì‹œì²­ë¥  ì˜ˆì¸¡', 'ì¶”ì²œ ì‹œìŠ¤í…œ', 'ì½˜í…ì¸  ë“±ê¸‰ ê¸°ì¤€'],
                    price: 199,
                    originalPrice: 249,
                    type: 'domain'
                },
                {
                    id: 'logistics-ai',
                    name: 'ğŸš› ë¬¼ë¥˜ AI ë„ë©”ì¸',
                    description: 'ë°°ì†¡ ìµœì í™”, ê²½ë¡œ ê³„íš, ì‹¤ì‹œê°„ ì¶”ì  AI',
                    features: ['ë°°ì†¡ ìµœì í™”', 'ê²½ë¡œ ê³„íš', 'ì‹¤ì‹œê°„ ì¶”ì ', 'ìš´ì†¡ ì•ˆì „ ê¸°ì¤€'],
                    price: 199,
                    originalPrice: 279,
                    type: 'domain'
                },
                
                // ğŸ¯ íŠ¹ë³„ ë„ë©”ì¸ (ê°œë°œì˜ˆì •)
                {
                    id: 'quantum-medical-ai',
                    name: 'âš›ï¸ ì–‘ì ì˜ë£Œ AI ë„ë©”ì¸',
                    description: 'ë¯¸ë˜ê¸‰ ì–‘ì ì˜ë£Œì§„ë‹¨, ì–‘ì ì•½ë¬¼ ì„¤ê³„ (ê°œë°œì˜ˆì •)',
                    features: ['ì–‘ì ì˜ë£Œì§„ë‹¨', 'ì–‘ì ì•½ë¬¼ ì„¤ê³„', 'ì–‘ì ìœ ì „ì²´ ë¶„ì„'],
                    price: 1499,
                    originalPrice: 1999,
                    type: 'domain',
                    badge: 'ğŸŒŸ ë¯¸ë˜ê¸‰',
                    comingSoon: true
                },
                {
                    id: 'ai-fusion-research',
                    name: 'ğŸ¤– AI ìœµí•© ì—°êµ¬ ë„ë©”ì¸',
                    description: 'í˜ëª…ê¸‰ AI-AI ìœµí•©, ë©”íƒ€ ì—°êµ¬ ì‹œìŠ¤í…œ (êµ¬ìƒì¤‘)',
                    features: ['AI-AI ìœµí•©', 'ë©”íƒ€ ì—°êµ¬', 'ììœ¨ ì—°êµ¬ ì‹œìŠ¤í…œ'],
                    price: 1999,
                    originalPrice: 2499,
                    type: 'domain',
                    badge: 'ğŸ”¥ í˜ëª…ê¸‰',
                    comingSoon: true
                },
                {
                    id: 'customer-ai',
                    name: 'ê³ ê°ì„œë¹„ìŠ¤ AI',
                    description: 'ì±—ë´‡, ê³ ê° ë¶„ì„, ì„œë¹„ìŠ¤ ìë™í™”',
                    features: ['ì§€ëŠ¥í˜• ì±—ë´‡', 'ê°ì • ë¶„ì„', 'ìë™ ì‘ë‹µ', 'ê³ ê° ë§Œì¡±ë„'],
                    price: 129,
                    originalPrice: 179,
                    type: 'domain'
                },
                {
                    id: 'saas-ai',
                    name: 'SaaS AI ë„ë©”ì¸',
                    description: 'í´ë¼ìš°ë“œ ê¸°ë°˜ AI ì„œë¹„ìŠ¤, API í†µí•©',
                    features: ['í´ë¼ìš°ë“œ AI', 'API í†µí•©', 'í™•ì¥ì„±', 'ë³´ì•ˆ'],
                    price: 199,
                    originalPrice: 279,
                    type: 'domain'
                }
            ],
            agents: [
                {
                    id: 'village-chief-dokkaebi',
                    name: 'ğŸ˜ï¸ ì´Œì¥ ë„ê¹¨ë¹„',
                    description: 'ë„ê¹¨ë¹„ ë§ˆì„ì˜ ì´Œì¥, ëª¨ë“  ë„ê¹¨ë¹„ë“¤ì„ ì´ê´„í•˜ê³  ë§ˆì„ ìš´ì˜ ì „ë°˜ì„ ê´€ë¦¬í•˜ëŠ” ë¦¬ë”',
                    features: ['ë§ˆì„ê´€ë¦¬', 'ë„ê¹¨ë¹„ì´ê´„', 'ë¦¬ë”ì‹­', 'ì¢…í•©ê´€ë¦¬'],
                    price: 199,
                    originalPrice: 299,
                    type: 'agent',
                    tier: 'premium',
                    autonomy_score: 99
                },
                {
                    id: 'math-dokkaebi',
                    name: 'ğŸ“ ìˆ˜í•™ ë„ê¹¨ë¹„',
                    description: 'ìˆ˜í•™ ë¬¸ì œ í•´ê²°, í†µê³„ ë¶„ì„, ìˆ˜ì¹˜ ê³„ì‚°, ì•Œê³ ë¦¬ì¦˜ ìµœì í™” ì „ë¬¸ê°€ (75.78% ì„±ê³¼)',
                    features: ['ìˆ˜í•™ë¬¸ì œí•´ê²°', 'í†µê³„ë¶„ì„', 'ìˆ˜ì¹˜ê³„ì‚°', 'ì•Œê³ ë¦¬ì¦˜ìµœì í™”'],
                    price: 159,
                    originalPrice: 239,
                    type: 'agent',
                    tier: 'premium',
                    autonomy_score: 98
                },
                {
                    id: 'physics-dokkaebi',
                    name: 'âš¡ ë¬¼ë¦¬ ë„ê¹¨ë¹„',
                    description: 'ë¬¼ë¦¬í•™ ë²•ì¹™ ë¶„ì„, ì‹œë®¬ë ˆì´ì…˜, ì‹¤í—˜ ì„¤ê³„, ê³¼í•™ì  ëª¨ë¸ë§ ì „ë¬¸ê°€ (100% ì„±ê³¼)',
                    features: ['ë¬¼ë¦¬í•™ë¶„ì„', 'ì‹œë®¬ë ˆì´ì…˜', 'ì‹¤í—˜ì„¤ê³„', 'ê³¼í•™ì ëª¨ë¸ë§'],
                    price: 179,
                    originalPrice: 269,
                    type: 'agent',
                    tier: 'premium',
                    autonomy_score: 100
                },
                {
                    id: 'chemistry-dokkaebi',
                    name: 'ğŸ§ª í™”í•™ ë„ê¹¨ë¹„',
                    description: 'í™”í•™ ë°˜ì‘ ë¶„ì„, ë¶„ì êµ¬ì¡° ì˜ˆì¸¡, ì‹¤í—˜ ê²°ê³¼ í•´ì„, í™”í•™ê³µì • ìµœì í™” ì „ë¬¸ê°€ (90% ì„±ê³¼)',
                    features: ['í™”í•™ë°˜ì‘ë¶„ì„', 'ë¶„ìêµ¬ì¡°ì˜ˆì¸¡', 'ì‹¤í—˜ê²°ê³¼í•´ì„', 'í™”í•™ê³µì •ìµœì í™”'],
                    price: 149,
                    originalPrice: 219,
                    type: 'agent',
                    tier: 'premium',
                    autonomy_score: 90
                },
                {
                    id: 'engineering-dokkaebi',
                    name: 'ğŸ”§ ê³µí•™ ë„ê¹¨ë¹„',
                    description: 'ê³µí•™ ì„¤ê³„, ì‹œìŠ¤í…œ ë¶„ì„, ê¸°ìˆ  ìµœì í™”, ì—”ì§€ë‹ˆì–´ë§ ì†”ë£¨ì…˜ ì „ë¬¸ê°€ (95% ì„±ê³¼)',
                    features: ['ê³µí•™ì„¤ê³„', 'ì‹œìŠ¤í…œë¶„ì„', 'ê¸°ìˆ ìµœì í™”', 'ì—”ì§€ë‹ˆì–´ë§ì†”ë£¨ì…˜'],
                    price: 169,
                    originalPrice: 249,
                    type: 'agent',
                    tier: 'premium',
                    autonomy_score: 95
                },
                {
                    id: 'biology-dokkaebi',
                    name: 'ğŸ§¬ ìƒë¬¼í•™ ë„ê¹¨ë¹„',
                    description: 'ìƒë¬¼í•™ì  ë°ì´í„° ë¶„ì„, ìœ ì „ì ì—°êµ¬, ìƒíƒœê³„ ëª¨ë¸ë§, ë°”ì´ì˜¤ ê¸°ìˆ  ì „ë¬¸ê°€ (88% ì„±ê³¼)',
                    features: ['ìƒë¬¼í•™ë°ì´í„°ë¶„ì„', 'ìœ ì „ìì—°êµ¬', 'ìƒíƒœê³„ëª¨ë¸ë§', 'ë°”ì´ì˜¤ê¸°ìˆ '],
                    price: 139,
                    originalPrice: 199,
                    type: 'agent',
                    tier: 'premium',
                    autonomy_score: 88
                },
                {
                    id: 'business-strategy-dokkaebi',
                    name: 'ğŸ“ˆ ë¹„ì¦ˆë‹ˆìŠ¤ ì „ëµ ë„ê¹¨ë¹„',
                    description: 'ê²½ì˜ ì „ëµ ìˆ˜ë¦½, ì‹œì¥ ë¶„ì„, ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸ ê°œë°œ, ì „ëµì  ì˜ì‚¬ê²°ì • ì „ë¬¸ê°€',
                    features: ['ê²½ì˜ì „ëµìˆ˜ë¦½', 'ì‹œì¥ë¶„ì„', 'ë¹„ì¦ˆë‹ˆìŠ¤ëª¨ë¸ê°œë°œ', 'ì „ëµì ì˜ì‚¬ê²°ì •'],
                    price: 189,
                    originalPrice: 279,
                    type: 'agent',
                    tier: 'enterprise',
                    autonomy_score: 95
                },
                {
                    id: 'communication-dokkaebi',
                    name: 'ğŸ’¬ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ë„ê¹¨ë¹„',
                    description: 'ì†Œí†µ ì „ëµ, ëŒ€í™” ë¶„ì„, ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ìµœì í™”, ê´€ê³„ ê´€ë¦¬ ì „ë¬¸ê°€',
                    features: ['ì†Œí†µì „ëµ', 'ëŒ€í™”ë¶„ì„', 'ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ìµœì í™”', 'ê´€ê³„ê´€ë¦¬'],
                    price: 99,
                    originalPrice: 149,
                    type: 'agent',
                    tier: 'standard',
                    autonomy_score: 89
                },
                {
                    id: 'financial-management-dokkaebi',
                    name: 'ğŸ’° ì¬ë¬´ ê´€ë¦¬ ë„ê¹¨ë¹„',
                    description: 'ì¬ë¬´ ê³„íš, íˆ¬ì ë¶„ì„, ë¦¬ìŠ¤í¬ ê´€ë¦¬, í¬íŠ¸í´ë¦¬ì˜¤ ìµœì í™” ì „ë¬¸ê°€',
                    features: ['ì¬ë¬´ê³„íš', 'íˆ¬ìë¶„ì„', 'ë¦¬ìŠ¤í¬ê´€ë¦¬', 'í¬íŠ¸í´ë¦¬ì˜¤ìµœì í™”'],
                    price: 179,
                    originalPrice: 259,
                    type: 'agent',
                    tier: 'enterprise',
                    autonomy_score: 96
                },
                {
                    id: 'innovation-creation-dokkaebi',
                    name: 'ğŸš€ í˜ì‹  ì°½ì¡° ë„ê¹¨ë¹„',
                    description: 'í˜ì‹  ì•„ì´ë””ì–´ ì°½ì¶œ, ì°½ì˜ì  ë¬¸ì œ í•´ê²°, ì‹ ê¸°ìˆ  ê°œë°œ, ë¯¸ë˜ ì˜ˆì¸¡ ì „ë¬¸ê°€',
                    features: ['í˜ì‹ ì•„ì´ë””ì–´ì°½ì¶œ', 'ì°½ì˜ì ë¬¸ì œí•´ê²°', 'ì‹ ê¸°ìˆ ê°œë°œ', 'ë¯¸ë˜ì˜ˆì¸¡'],
                    price: 159,
                    originalPrice: 229,
                    type: 'agent',
                    tier: 'premium',
                    autonomy_score: 93
                },
                {
                    id: 'technology-management-dokkaebi',
                    name: 'ğŸ”§ ê¸°ìˆ  ê´€ë¦¬ ë„ê¹¨ë¹„',
                    description: 'ê¸°ìˆ  ì‹œìŠ¤í…œ ê´€ë¦¬, IT ì¸í”„ë¼ ìµœì í™”, ê¸°ìˆ  ì „ëµ ìˆ˜ë¦½, ë””ì§€í„¸ í˜ì‹  ì „ë¬¸ê°€',
                    features: ['ê¸°ìˆ ì‹œìŠ¤í…œê´€ë¦¬', 'ITì¸í”„ë¼ìµœì í™”', 'ê¸°ìˆ ì „ëµìˆ˜ë¦½', 'ë””ì§€í„¸í˜ì‹ '],
                    price: 149,
                    originalPrice: 219,
                    type: 'agent',
                    tier: 'premium',
                    autonomy_score: 94
                },
                {
                    id: 'user-management-dokkaebi',
                    name: 'ğŸ‘¥ ì‚¬ìš©ì ê´€ë¦¬ ë„ê¹¨ë¹„',
                    description: 'ì‚¬ìš©ì ê²½í—˜ ìµœì í™”, ê³ ê° ê´€ë¦¬, ì„œë¹„ìŠ¤ ê°œì„ , ì‚¬ìš©ì í–‰ë™ ë¶„ì„ ì „ë¬¸ê°€',
                    features: ['ì‚¬ìš©ìê²½í—˜ìµœì í™”', 'ê³ ê°ê´€ë¦¬', 'ì„œë¹„ìŠ¤ê°œì„ ', 'ì‚¬ìš©ìí–‰ë™ë¶„ì„'],
                    price: 89,
                    originalPrice: 129,
                    type: 'agent',
                    tier: 'standard',
                    autonomy_score: 87
                }
            ],
            bundles: [
                {
                    id: 'starter-bundle',
                    name: 'ìŠ¤íƒ€í„° ë²ˆë“¤',
                    description: 'ì¸ê¸° AI ë„ë©”ì¸ 3ê°œ + ì—ì´ì „íŠ¸ 5ëª…',
                    features: ['ì˜ë£Œ+ê¸ˆìœµ+êµìœ¡ AI', 'í•µì‹¬ ì—ì´ì „íŠ¸ 5ëª…', '24/7 ì§€ì›', 'ì›”ê°„ ë¦¬í¬íŠ¸'],
                    price: 399,
                    originalPrice: 699,
                    type: 'bundle'
                },
                {
                    id: 'business-bundle',
                    name: 'ë¹„ì¦ˆë‹ˆìŠ¤ ë²ˆë“¤',
                    description: 'AI ë„ë©”ì¸ 8ê°œ + ì—ì´ì „íŠ¸ 10ëª…',
                    features: ['ì£¼ìš” AI ë„ë©”ì¸ 8ê°œ', 'ì „ë¬¸ ì—ì´ì „íŠ¸ 10ëª…', 'ìš°ì„  ì§€ì›', 'ì»¤ìŠ¤í…€ ê¸°ëŠ¥'],
                    price: 899,
                    originalPrice: 1599,
                    type: 'bundle'
                },
                {
                    id: 'enterprise-bundle',
                    name: 'ì—”í„°í”„ë¼ì´ì¦ˆ ë²ˆë“¤',
                    description: 'ëª¨ë“  AI ë„ë©”ì¸ 12ê°œ + ëª¨ë“  ì—ì´ì „íŠ¸ 15ëª…',
                    features: ['ì „ì²´ AI ë„ë©”ì¸', 'ëª¨ë“  ì—ì´ì „íŠ¸', 'ì „ë‹´ ì§€ì›', 'ë¬´ì œí•œ ì»¤ìŠ¤í„°ë§ˆì´ì§•'],
                    price: 1999,
                    originalPrice: 3999,
                    type: 'bundle'
                }
            ]
        };

        let cart = [];
        let currentCategory = 'all';
        let selectedPaymentMethod = 'card';
        let stripe = null;
        let elements = null;
        let card = null;

        // Stripe ì´ˆê¸°í™” (ì‹¤ì œ ì‚¬ìš©ì‹œì—ëŠ” ë³¸ì¸ì˜ Publishable Keyë¡œ êµì²´)
        let STRIPE_PUBLISHABLE_KEY = 'pk_test_demo'; // ê¸°ë³¸ê°’
        
        // í˜ì´ì§€ ë¡œë“œì‹œ Stripe ì´ˆê¸°í™” ë° ì—ì´ì „íŠ¸ ë¡œë“œ
        document.addEventListener('DOMContentLoaded', function() {
            loadPaymentConfig();
            loadAgents();
        });
        
        // APIì—ì„œ ì—ì´ì „íŠ¸ ë°ì´í„° ë¡œë“œ
        async function loadAgents() {
            try {
                console.log('ì—ì´ì „íŠ¸ ë°ì´í„° ë¡œë”© ì‹œì‘...');
                const response = await fetch('/agents');
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const agentsData = await response.json();
                console.log('ë¡œë“œëœ ì—ì´ì „íŠ¸ ë°ì´í„°:', agentsData);
                console.log('agentsData.success:', agentsData.success);
                console.log('agentsData.agents:', agentsData.agents);
                console.log('agentsData.agents íƒ€ì…:', typeof agentsData.agents);
                console.log('agentsData.agents.length:', agentsData.agents ? agentsData.agents.length : 'undefined');
                
                // API ì‘ë‹µ êµ¬ì¡°ì— ë§ê²Œ agents ë°°ì—´ ì¶”ì¶œ
                let agentsArray = [];
                if (agentsData && agentsData.success && agentsData.agents) {
                    if (Array.isArray(agentsData.agents)) {
                        agentsArray = agentsData.agents;
                        console.log('agents ë°°ì—´ ì¶”ì¶œ ì„±ê³µ');
                    } else if (typeof agentsData.agents === 'object') {
                        // agentsê°€ ê°ì²´ì¸ ê²½ìš° ê°’ë“¤ì„ ë°°ì—´ë¡œ ë³€í™˜
                        agentsArray = Object.values(agentsData.agents);
                        console.log('agents ê°ì²´ë¥¼ ë°°ì—´ë¡œ ë³€í™˜:', agentsArray);
                    }
                } else if (Array.isArray(agentsData)) {
                    agentsArray = agentsData;
                    console.log('ì§ì ‘ ë°°ì—´ ì‚¬ìš©');
                } else {
                    console.warn('ì˜ˆìƒë˜ì§€ ì•Šì€ API ì‘ë‹µ êµ¬ì¡°:', agentsData);
                    console.log('ì‘ë‹µ êµ¬ì¡° ë¶„ì„:');
                    console.log('- success í•„ë“œ:', agentsData.success);
                    console.log('- agents í•„ë“œ:', agentsData.agents);
                    console.log('- ì „ì²´ í‚¤:', Object.keys(agentsData));
                    return;
                }
                
                console.log('ìµœì¢… ì¶”ì¶œëœ ì—ì´ì „íŠ¸ ë°°ì—´:', agentsArray);
                console.log('ë°°ì—´ ê¸¸ì´:', agentsArray.length);
                
                if (agentsArray && agentsArray.length > 0) {
                    // API ë°ì´í„°ë¥¼ ì œí’ˆ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
                    const convertedAgents = agentsArray.map((agent, index) => {
                        console.log(`ì—ì´ì „íŠ¸ ${index + 1}:`, agent);
                        return {
                            id: agent.id || agent.agent_id || `agent-${index}`,
                            name: agent.name || agent.agent_name || `ì—ì´ì „íŠ¸ ${index + 1}`,
                            description: agent.description || 'ì„¤ëª… ì—†ìŒ',
                            features: agent.capabilities || ['ê¸°ë³¸ ê¸°ëŠ¥'],
                            price: agent.pricing?.monthly || 99,
                            originalPrice: (agent.pricing?.monthly || 99) * 1.4,
                            type: 'agent'
                        };
                    });
                    
                    // products ê°ì²´ì˜ agents ë°°ì—´ êµì²´
                    products.agents = convertedAgents;
                    console.log('ì—ì´ì „íŠ¸ ë°ì´í„° ì—…ë°ì´íŠ¸ ì™„ë£Œ:', products.agents);
                    
                    // í™”ë©´ ìƒˆë¡œê³ ì¹¨
                    renderProducts();
                } else {
                    console.warn('ì—ì´ì „íŠ¸ ë°ì´í„°ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤:', agentsArray);
                }
            } catch (error) {
                console.error('ì—ì´ì „íŠ¸ ë¡œë”© ì‹¤íŒ¨:', error);
                console.log('í•˜ë“œì½”ë”©ëœ ë°ì´í„° ì‚¬ìš©');
            }
        }
        
        async function loadPaymentConfig() {
            try {
                const response = await fetch('/api/payment-config');
                const config = await response.json();
                STRIPE_PUBLISHABLE_KEY = config.stripe_publishable_key;
                initializeStripe();
            } catch (error) {
                console.warn('ê²°ì œ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨, ë°ëª¨ ëª¨ë“œë¡œ ì‹¤í–‰:', error);
                initializeStripe();
            }
        }
        
        function initializeStripe() {
            try {
                if (STRIPE_PUBLISHABLE_KEY !== 'pk_test_demo') {
                    stripe = Stripe(STRIPE_PUBLISHABLE_KEY);
                    elements = stripe.elements();
                    
                    // ì¹´ë“œ ìš”ì†Œ ìŠ¤íƒ€ì¼
                    const style = {
                        base: {
                            fontSize: '16px',
                            color: '#424770',
                            '::placeholder': {
                                color: '#aab7c4',
                            },
                        },
                    };
                    
                    card = elements.create('card', {style: style});
                    card.mount('#card-element');
                    
                    // ì¹´ë“œ ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
                    card.addEventListener('change', function(event) {
                        const displayError = document.getElementById('paymentError');
                        if (event.error) {
                            displayError.textContent = event.error.message;
                            displayError.style.display = 'block';
                        } else {
                            displayError.style.display = 'none';
                        }
                    });
                } else {
                    console.log('ë°ëª¨ ëª¨ë“œ: Stripe ì—†ì´ ì‹¤í–‰');
                }
            } catch (error) {
                console.warn('Stripe ì´ˆê¸°í™” ì‹¤íŒ¨ (ë°ëª¨ ëª¨ë“œ):', error.message);
                // ë°ëª¨ ëª¨ë“œì—ì„œëŠ” Stripe ì—†ì´ë„ ë™ì‘
            }
        }

        // ì¹´í…Œê³ ë¦¬ í‘œì‹œ
        function showCategory(category) {
            currentCategory = category;
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            renderProducts();
        }

        // ìƒí’ˆ ë Œë”ë§
        function renderProducts() {
            const container = document.getElementById('productsContainer');
            let productsToShow = [];

            if (currentCategory === 'all') {
                productsToShow = [...products.domains, ...products.agents, ...products.bundles];
            } else {
                productsToShow = products[currentCategory] || [];
            }

            container.innerHTML = productsToShow.map(product => `
                <div class="product-card">
                    <div class="product-badge ${product.type}">${product.type.toUpperCase()}</div>
                    <div class="product-title">${product.name}</div>
                    <div class="product-description">${product.description}</div>
                    <ul class="product-features">
                        ${product.features.map(feature => `<li>${feature}</li>`).join('')}
                    </ul>
                    <div class="product-price">
                        <div>
                            <span class="original-price">$${product.originalPrice}</span>
                            <span class="price">$${product.price}/ì›”</span>
                        </div>
                    </div>
                    <button class="subscribe-btn" onclick="addToCart('${product.id}')">
                        ğŸ›’ ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°
                    </button>
                </div>
            `).join('');
        }

        // ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€
        function addToCart(productId) {
            const allProducts = [...products.domains, ...products.agents, ...products.bundles];
            const product = allProducts.find(p => p.id === productId);
            
            if (product && !cart.find(item => item.id === productId)) {
                cart.push(product);
                updateCartDisplay();
                
                // ì¶”ê°€ ì•Œë¦¼
                alert(`âœ… ${product.name}ì´(ê°€) ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!`);
            } else if (cart.find(item => item.id === productId)) {
                alert('âš ï¸ ì´ë¯¸ ì¥ë°”êµ¬ë‹ˆì— ìˆëŠ” ìƒí’ˆì…ë‹ˆë‹¤.');
            }
        }

        // ì¥ë°”êµ¬ë‹ˆ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateCartDisplay() {
            const cartCount = document.getElementById('cartCount');
            const cartItems = document.getElementById('cartItems');
            
            cartCount.textContent = cart.length;
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<small style="opacity: 0.7;">ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤</small>';
            } else {
                cartItems.innerHTML = cart.map(item => `
                    <div style="margin: 5px 0; padding: 5px; background: rgba(255,255,255,0.1); border-radius: 5px; font-size: 0.9em;">
                        <strong>${item.name}</strong><br>
                        <span style="color: #2ecc71;">$${item.price}/ì›”</span>
                        <button onclick="removeFromCart('${item.id}')" style="float: right; background: #e74c3c; color: white; border: none; border-radius: 3px; padding: 2px 6px; cursor: pointer;">Ã—</button>
                    </div>
                `).join('');
            }
        }

        // ì¥ë°”êµ¬ë‹ˆì—ì„œ ì œê±°
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartDisplay();
        }

        // ê²°ì œ í˜ì´ì§€ í‘œì‹œ
        function showCheckout() {
            if (cart.length === 0) {
                alert('âš ï¸ ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.');
                return;
            }

            const checkoutSection = document.getElementById('checkoutSection');
            const orderSummary = document.getElementById('orderSummary');
            const totalPrice = document.getElementById('totalPrice');

            // ì£¼ë¬¸ ìš”ì•½
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            
            orderSummary.innerHTML = cart.map(item => `
                <div style="display: flex; justify-content: space-between; padding: 10px; background: rgba(255,255,255,0.1); margin: 5px 0; border-radius: 8px;">
                    <span>${item.name}</span>
                    <span>$${item.price}/ì›”</span>
                </div>
            `).join('');

            totalPrice.textContent = `ì´ ê¸ˆì•¡: $${total}/ì›”`;
            
            checkoutSection.classList.remove('hidden');
            checkoutSection.scrollIntoView({ behavior: 'smooth' });
        }

        // ê²°ì œ ë°©ë²• ì„ íƒ
        function selectPaymentMethod(method, element) {
            selectedPaymentMethod = method;
            
            // ëª¨ë“  ê²°ì œ ë°©ë²• ì„ íƒ í•´ì œ
            document.querySelectorAll('.payment-method').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            
            // ê²°ì œ í¼ í‘œì‹œ/ìˆ¨ê¹€
            const cardForm = document.getElementById('cardPaymentForm');
            const bankForm = document.getElementById('bankPaymentForm');
            const submitBtn = document.getElementById('submitBtn');
            
            if (method === 'card') {
                cardForm.style.display = 'block';
                bankForm.style.display = 'none';
                submitBtn.innerHTML = 'ğŸ’³ ì‹ ìš©ì¹´ë“œë¡œ ê²°ì œí•˜ê¸°';
            } else if (method === 'paypal') {
                cardForm.style.display = 'none';
                bankForm.style.display = 'none';
                submitBtn.innerHTML = 'ğŸ’™ PayPalë¡œ ê²°ì œí•˜ê¸°';
            } else if (method === 'bank') {
                cardForm.style.display = 'none';
                bankForm.style.display = 'block';
                submitBtn.innerHTML = 'ğŸ¦ ê³„ì¢Œì´ì²´ ì‹ ì²­í•˜ê¸°';
            }
        }

        // ì£¼ë¬¸ ì œì¶œ
        document.getElementById('checkoutForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('customerName').value,
                email: document.getElementById('customerEmail').value,
                company: document.getElementById('customerCompany').value,
                paymentMethod: selectedPaymentMethod,
                items: cart,
                total: cart.reduce((sum, item) => sum + item.price, 0)
            };

            // ê²°ì œ ì²˜ë¦¬
            processPayment(formData);
        });

        // ê²°ì œ ì²˜ë¦¬
        async function processPayment(orderData) {
            const loadingEl = document.getElementById('paymentLoading');
            const errorEl = document.getElementById('paymentError');
            const successEl = document.getElementById('paymentSuccess');
            const submitBtn = document.getElementById('submitBtn');
            
            // ë¡œë”© ì‹œì‘
            loadingEl.style.display = 'block';
            errorEl.style.display = 'none';
            successEl.style.display = 'none';
            submitBtn.disabled = true;
            
            try {
                if (selectedPaymentMethod === 'card') {
                    await processCardPayment(orderData);
                } else if (selectedPaymentMethod === 'paypal') {
                    await processPayPalPayment(orderData);
                } else if (selectedPaymentMethod === 'bank') {
                    await processBankTransfer(orderData);
                }
            } catch (error) {
                showError(error.message);
            } finally {
                loadingEl.style.display = 'none';
                submitBtn.disabled = false;
            }
        }
        
        // ì‹ ìš©ì¹´ë“œ ê²°ì œ ì²˜ë¦¬
        async function processCardPayment(orderData) {
            if (!stripe || !card) {
                // ë°ëª¨ ëª¨ë“œ: Stripe ì—†ì´ ì‹œë®¬ë ˆì´ì…˜
                await simulatePayment(orderData);
                return;
            }
            
            try {
                // Stripe í† í° ìƒì„±
                const {token, error} = await stripe.createToken(card);
                
                if (error) {
                    throw new Error(error.message);
                }
                
                // ë°±ì—”ë“œ API í˜¸ì¶œ
                const response = await fetch('/api/process-payment', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        token: token.id,
                        amount: orderData.total * 100, // cents
                        customer: {
                            name: orderData.name,
                            email: orderData.email,
                            company: orderData.company,
                            paymentMethod: 'card'
                        },
                        items: orderData.items.map(item => ({
                            id: item.id,
                            name: item.name,
                            price: item.price,
                            type: item.type
                        }))
                    })
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.detail || 'ê²°ì œ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
                
                const result = await response.json();
                showSuccess(orderData, result.subscription_id, result.status, result);
                
            } catch (error) {
                // ì‹¤ì œ API í˜¸ì¶œ ì‹¤íŒ¨ì‹œ ë°ëª¨ ëª¨ë“œë¡œ í´ë°±
                console.warn('ì‹¤ì œ ê²°ì œ ì‹¤íŒ¨, ë°ëª¨ ëª¨ë“œë¡œ ì „í™˜:', error.message);
                await simulatePayment(orderData);
            }
        }
        
        // PayPal ê²°ì œ ì²˜ë¦¬
        async function processPayPalPayment(orderData) {
            try {
                // ë°±ì—”ë“œ API í˜¸ì¶œ
                const response = await fetch('/api/process-payment', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        amount: orderData.total * 100,
                        customer: {
                            name: orderData.name,
                            email: orderData.email,
                            company: orderData.company,
                            paymentMethod: 'paypal'
                        },
                        items: orderData.items.map(item => ({
                            id: item.id,
                            name: item.name,
                            price: item.price,
                            type: item.type
                        }))
                    })
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.detail || 'PayPal ê²°ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
                
                const result = await response.json();
                showSuccess(orderData, result.subscription_id, result.status, result);
                
            } catch (error) {
                console.warn('PayPal ê²°ì œ ì‹¤íŒ¨, ë°ëª¨ ëª¨ë“œë¡œ ì „í™˜:', error.message);
                await simulatePayment(orderData);
            }
        }
        
        // ê³„ì¢Œì´ì²´ ì²˜ë¦¬
        async function processBankTransfer(orderData) {
            try {
                // ë°±ì—”ë“œ API í˜¸ì¶œ
                const response = await fetch('/api/bank-transfer', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        customer: {
                            name: orderData.name,
                            email: orderData.email,
                            company: orderData.company,
                            paymentMethod: 'bank'
                        },
                        items: orderData.items.map(item => ({
                            id: item.id,
                            name: item.name,
                            price: item.price,
                            type: item.type
                        }))
                    })
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.detail || 'ê³„ì¢Œì´ì²´ ì‹ ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
                
                const result = await response.json();
                showSuccess(orderData, result.subscription_id, result.status, result);
                
            } catch (error) {
                console.warn('ê³„ì¢Œì´ì²´ ì‹ ì²­ ì‹¤íŒ¨, ë°ëª¨ ëª¨ë“œë¡œ ì „í™˜:', error.message);
                await simulatePayment(orderData, 'pending');
            }
        }
        
        // ê²°ì œ ì‹œë®¬ë ˆì´ì…˜ (ë°ëª¨ìš©)
        async function simulatePayment(orderData, status = 'completed') {
            // 2ì´ˆ ì§€ì—°ìœ¼ë¡œ ì‹¤ì œ ê²°ì œ ì²˜ë¦¬ ì‹œë®¬ë ˆì´ì…˜
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            const subscriptionId = 'sub_' + Math.random().toString(36).substr(2, 9);
            showSuccess(orderData, subscriptionId, status);
        }
        
        // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
        function showSuccess(orderData, subscriptionId, status = 'completed', result = null) {
            console.log('ğŸ¯ showSuccess í˜¸ì¶œë¨:', { orderData, subscriptionId, status, result });
            
            // ğŸ”— ê²°ì œ ì™„ë£Œ í›„ ê°€ìƒ ë§í¬ í¬í•¨ëœ ì„±ê³µ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
            if (result && result.redirect_url) {
                console.log('âœ… redirect_url ë°œê²¬:', result.redirect_url);
                
                // ì¼ì‹œì ìœ¼ë¡œ ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
                const successEl = document.getElementById('paymentSuccess');
                const detailsEl = document.getElementById('subscriptionDetails');
                
                if (successEl) successEl.style.display = 'block';
                
                if (detailsEl) {
                    detailsEl.innerHTML = `
                        <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                            <p><strong>êµ¬ë… ID:</strong> ${subscriptionId}</p>
                            <p><strong>ìƒíƒœ:</strong> <span style="color: #2ecc71">ê²°ì œ ì™„ë£Œ</span></p>
                            <p><strong>ê°€ìƒ ì„œë¹„ìŠ¤ ë§í¬:</strong> ${result.links_count || 0}ê°œ ìƒì„±</p>
                            <p style="color: #f39c12; margin-top: 10px;">ğŸ”— ì ì‹œ í›„ ê°€ìƒ ì„œë¹„ìŠ¤ ë§í¬ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤...</p>
                        </div>
                    `;
                }
                
                // ì¦‰ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (ì§€ì—° ì‹œê°„ ë‹¨ì¶•)
                console.log('ğŸš€ 1ì´ˆ í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œì‘...');
                setTimeout(() => {
                    console.log('ğŸ”— ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹¤í–‰:', result.redirect_url);
                    window.location.href = result.redirect_url;
                }, 1000); // 1ì´ˆ í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸
                
                return; // ì¡°ê¸° ì¢…ë£Œ
            } 
            
            console.log('âŒ redirect_urlì´ ì—†ìŒ. ê¸°ë³¸ ì„±ê³µ í˜ì´ì§€ í‘œì‹œ');
            
            // ê¸°ì¡´ ë¡œì§ (ë¦¬ë‹¤ì´ë ‰íŠ¸ ì •ë³´ê°€ ì—†ëŠ” ê²½ìš°)
            const successEl = document.getElementById('paymentSuccess');
            const detailsEl = document.getElementById('subscriptionDetails');
            
            let statusText = status === 'pending' ? 'ì…ê¸ˆ í™•ì¸ ëŒ€ê¸° ì¤‘' : 'í™œì„±í™”ë¨';
            let statusColor = status === 'pending' ? '#f39c12' : '#2ecc71';
            
            if (detailsEl) {
                detailsEl.innerHTML = `
                    <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                        <p><strong>êµ¬ë… ID:</strong> ${subscriptionId}</p>
                        <p><strong>ìƒíƒœ:</strong> <span style="color: ${statusColor}">${statusText}</span></p>
                        <p><strong>ì›” ê²°ì œì•¡:</strong> $${orderData.total}</p>
                        <p><strong>êµ¬ë… ìƒí’ˆ:</strong> ${orderData.items.length}ê°œ</p>
                        ${status === 'pending' ? '<p style="color: #f39c12; margin-top: 10px;">ğŸ’¡ ì…ê¸ˆ ì™„ë£Œ í›„ 24ì‹œê°„ ë‚´ì— ì„œë¹„ìŠ¤ê°€ í™œì„±í™”ë©ë‹ˆë‹¤.</p>' : ''}
                    </div>
                `;
            }
            
            if (successEl) successEl.style.display = 'block';
            
            // ğŸ¯ STEMê¸‰ ì—ì´ì „íŠ¸ í† í° ìƒì„± ë° í‘œì‹œ
            if (status === 'completed') {
                const stemToken = generateAccessToken(subscriptionId);
                const tokenInput = document.getElementById('accessToken');
                const stemAccessDiv = document.getElementById('stemAgentAccess');
                
                if (tokenInput && stemAccessDiv) {
                    tokenInput.value = stemToken;
                    stemAccessDiv.style.display = 'block';
                    
                    // í† í°ì„ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì—ë„ ì €ì¥
                    sessionStorage.setItem('current_stem_token', stemToken);
                    sessionStorage.setItem('subscription_id', subscriptionId);
                    
                    console.log('ğŸ¯ STEMê¸‰ í† í° ìƒì„± ì™„ë£Œ:', stemToken);
                }
            }
            
            // ì´ë©”ì¼ ì „ì†¡
            sendConfirmationEmail(orderData, subscriptionId, status);
            
            // ì¥ë°”êµ¬ë‹ˆ ì´ˆê¸°í™”
            setTimeout(() => {
                cart = [];
                updateCartDisplay();
                document.getElementById('checkoutSection').classList.add('hidden');
                document.getElementById('checkoutForm').reset();
                if (successEl) successEl.style.display = 'none';
            }, 10000); // 10ì´ˆ í›„ ìë™ ì´ˆê¸°í™”
        }
        
        // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
        function showError(message) {
            const errorEl = document.getElementById('paymentError');
            errorEl.textContent = message;
            errorEl.style.display = 'block';
        }
        
        // í™•ì¸ ì´ë©”ì¼ ì „ì†¡
        function sendConfirmationEmail(orderData, subscriptionId, status) {
            const emailSubject = `ğŸ‰ HYOJIN.AI êµ¬ë… ${status === 'pending' ? 'ì‹ ì²­' : 'ê²°ì œ'} ì™„ë£Œ - ${subscriptionId}`;
            const statusText = status === 'pending' ? 'ì‹ ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤' : 'ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤';
            
            const emailBody = `HYOJIN.AI êµ¬ë… ì„œë¹„ìŠ¤ ${statusText}!

ğŸ“‹ êµ¬ë… ì •ë³´:
ğŸ†” êµ¬ë… ID: ${subscriptionId}
ğŸ‘¤ ê³ ê°ëª…: ${orderData.name}
ğŸ“§ ì´ë©”ì¼: ${orderData.email}
ğŸ¢ íšŒì‚¬: ${orderData.company || 'ê°œì¸'}
ğŸ’³ ê²°ì œ ë°©ë²•: ${getPaymentMethodName(orderData.paymentMethod)}
ğŸ“Š ìƒíƒœ: ${status === 'pending' ? 'ì…ê¸ˆ í™•ì¸ ëŒ€ê¸°' : 'í™œì„±í™”ë¨'}

ğŸ›ï¸ êµ¬ë… ìƒí’ˆ (${orderData.items.length}ê°œ):
${orderData.items.map((item, i) => `${i+1}. ${item.name} - $${item.price}/ì›”`).join('\n')}

ğŸ’° ì›” ê²°ì œ ê¸ˆì•¡: $${orderData.total}
ğŸ“… ì‹ ì²­ì¼: ${new Date().toLocaleString('ko-KR')}

${status === 'pending' ? `
ğŸ¦ ì…ê¸ˆ ì •ë³´:
ì€í–‰: êµ­ë¯¼ì€í–‰
ê³„ì¢Œ: 123-456-789012
ì˜ˆê¸ˆì£¼: HYOJIN.AI
ì…ê¸ˆì•¡: $${orderData.total}

âš ï¸ ì…ê¸ˆ í›„ ì´ ì´ë©”ì¼ì— ì…ê¸ˆí™•ì¸ì„œë¥¼ ì²¨ë¶€í•˜ì—¬ íšŒì‹ í•´ì£¼ì„¸ìš”.
` : `
ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! êµ¬ë…ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.
ï¿½ ì„œë¹„ìŠ¤ ì´ìš©: https://app.hyojin.ai
ï¿½ ë¡œê·¸ì¸ ì •ë³´ê°€ ë³„ë„ ì´ë©”ì¼ë¡œ ë°œì†¡ë©ë‹ˆë‹¤.
`}

---
ë„ê¹¨ë¹„ë§ˆì„ì¥í„°
ğŸŒ https://hyojin.ai
ğŸ“§ support@hyojin.ai`;

            // ì´ë©”ì¼ ì•± ì—´ê¸°
            window.open(`mailto:${orderData.email}?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`, '_blank');
        }
        
        // ê²°ì œ ë°©ë²• ì´ë¦„ ë°˜í™˜
        function getPaymentMethodName(method) {
            const names = {
                'card': 'ì‹ ìš©ì¹´ë“œ',
                'paypal': 'PayPal',
                'bank': 'ê³„ì¢Œì´ì²´'
            };
            return names[method] || method;
        }

        // ì œí’ˆ ë Œë”ë§ í•¨ìˆ˜
        function renderProducts() {
            console.log('ì œí’ˆ ë Œë”ë§ ì‹œì‘...');
            const container = document.getElementById('productsGrid') || document.querySelector('.products-grid');
            if (!container) {
                console.error('ì œí’ˆ ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const currentCategory = document.querySelector('.tab.active')?.dataset?.category || 'all';
            let productsToShow = [];
            
            if (currentCategory === 'all') {
                productsToShow = [...products.domains, ...products.agents];
            } else if (currentCategory === 'domains') {
                productsToShow = [...products.domains];
            } else if (currentCategory === 'agents') {
                productsToShow = [...products.agents];
            } else if (currentCategory === 'premium') {
                // í”„ë¦¬ë¯¸ì—„ ë„ë©”ì¸ë§Œ í•„í„°ë§
                productsToShow = products.domains.filter(product => product.premium || product.comingSoon);
            }
            
            console.log(`í˜„ì¬ ì¹´í…Œê³ ë¦¬: ${currentCategory}, í‘œì‹œí•  ì œí’ˆ: ${productsToShow.length}ê°œ`);
            
            container.innerHTML = productsToShow.map(product => {
                const premiumClass = product.premium ? 'premium' : '';
                const comingSoonClass = product.comingSoon ? 'coming-soon' : '';
                const badgeText = product.type === 'domain' ? 'Domain' : 'Agent';
                const badgeClass = product.type === 'domain' ? 'domain' : 'agent';
                const discount = product.originalPrice > product.price ? 
                    Math.round((1 - product.price / product.originalPrice) * 100) : 0;
                
                return `
                    <div class="product-card ${premiumClass} ${comingSoonClass}">
                        <!-- ìƒë‹¨ ë°°ì§€ë“¤ -->
                        ${discount > 0 ? `<div class="discount-badge">${discount}% OFF</div>` : ''}
                        
                        <!-- ì œí’ˆ ë‚´ìš© -->
                        <div class="product-content">
                            <div class="product-badge ${badgeClass}">${badgeText}</div>
                            <div class="product-title">${product.name}</div>
                            <div class="product-description">${product.description}</div>
                            <ul class="product-features">
                                ${product.features.slice(0, 4).map(feature => `<li>${feature}</li>`).join('')}
                                ${product.features.length > 4 ? `<li style="opacity: 0.7; font-style: italic;">+${product.features.length - 4}ê°œ ë”</li>` : ''}
                            </ul>
                            <div class="product-price">
                                <div>
                                    ${product.originalPrice > product.price ? `<span class="original-price">$${product.originalPrice}</span>` : ''}
                                    <span class="price">$${product.price}/ì›”</span>
                                </div>
                            </div>
                            <button class="subscribe-btn" 
                                    onclick="${product.comingSoon ? 'alertComingSoon()' : `addToCart('${product.id}')`}"
                                    ${product.comingSoon ? 'disabled' : ''}>
                                ${product.comingSoon ? 'ğŸ”„ ê°œë°œì˜ˆì •' : (product.premium ? 'ğŸ‘‘ í”„ë¦¬ë¯¸ì—„ êµ¬ë…' : 'ğŸ“¦ êµ¬ë…í•˜ê¸°')}
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
            
            console.log('ì œí’ˆ ë Œë”ë§ ì™„ë£Œ');
        }
        
        // Coming Soon ì•Œë¦¼
        function alertComingSoon() {
            alert('ğŸš€ ì´ ë„ë©”ì¸ì€ í˜„ì¬ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.\nê³§ ì¶œì‹œë  ì˜ˆì •ì´ë‹ˆ ê¸°ëŒ€í•´ ì£¼ì„¸ìš”!');
        }
        
        // ì‡¼í•‘ì¹´íŠ¸ì— ìƒí’ˆ ì¶”ê°€
        function addToCart(productId) {
            // ëª¨ë“  ì œí’ˆì—ì„œ ì°¾ê¸°
            const allProducts = [...products.domains, ...products.agents];
            const product = allProducts.find(p => p.id === productId);
            
            if (!product) {
                alert('âš ï¸ ì œí’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            // ì´ë¯¸ ì¹´íŠ¸ì— ìˆëŠ”ì§€ í™•ì¸
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                alert('ğŸ“¦ ì´ë¯¸ ì¹´íŠ¸ì— ì¶”ê°€ëœ ìƒí’ˆì…ë‹ˆë‹¤!');
                return;
            }
            
            // ì¹´íŠ¸ì— ì¶”ê°€
            cart.push({
                id: productId,
                name: product.name,
                price: product.price,
                originalPrice: product.originalPrice || product.price,
                type: product.type,
                features: product.features.slice(0, 3) // ì£¼ìš” ê¸°ëŠ¥ 3ê°œë§Œ
            });
            
            // ì„±ê³µ ë©”ì‹œì§€
            const cartTotal = cart.reduce((sum, item) => sum + item.price, 0);
            const discountTotal = cart.reduce((sum, item) => sum + (item.originalPrice - item.price), 0);
            
            let message = `âœ… "${product.name}"ì´(ê°€) ì¹´íŠ¸ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!\n\n`;
            message += `ğŸ“Š í˜„ì¬ ì¹´íŠ¸: ${cart.length}ê°œ ìƒí’ˆ\n`;
            message += `ğŸ’° ì›” ê²°ì œê¸ˆì•¡: $${cartTotal}\n`;
            if (discountTotal > 0) {
                message += `ğŸ‰ ì´ í• ì¸: $${discountTotal}/ì›”\n`;
            }
            message += `\nğŸ›’ ê²°ì œí•˜ì‹œë ¤ë©´ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ì„¸ìš”!`;
            
            alert(message);
            
            // ì¹´íŠ¸ í‘œì‹œ ì—…ë°ì´íŠ¸
            updateCartDisplay();
            
            console.log('ì¹´íŠ¸ì— ì¶”ê°€ë¨:', product.name, '| í˜„ì¬ ì¹´íŠ¸:', cart);
        }
        
        // ì¹´íŠ¸ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateCartDisplay() {
            // ì¹´íŠ¸ ì•„ì´í…œ ìˆ˜ í‘œì‹œ (í—¤ë”ì— ìˆë‹¤ë©´)
            const cartCountElement = document.getElementById('cartCount');
            if (cartCountElement) {
                cartCountElement.textContent = cart.length;
            }
            
            // ì´ ê¸ˆì•¡ ì—…ë°ì´íŠ¸
            const totalElement = document.getElementById('orderTotal');
            if (totalElement && cart.length > 0) {
                const total = cart.reduce((sum, item) => sum + item.price, 0);
                totalElement.textContent = `$${total}`;
            }
        }
        
        // ì¹´í…Œê³ ë¦¬ íƒ­ ì „í™˜
        function switchCategory(category, element) {
            currentCategory = category;
            // ëª¨ë“  íƒ­ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            // í´ë¦­ëœ íƒ­ì— active í´ë˜ìŠ¤ ì¶”ê°€
            element.classList.add('active');
            // ì œí’ˆ ë‹¤ì‹œ ë Œë”ë§
            renderProducts();
        }
        // ì´ˆê¸° ë¡œë“œ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ, ì´ˆê¸°í™” ì‹œì‘...');
            renderProducts();
            updateCartDisplay();
            loadAgentsFromAPI();
            loadPaymentConfig();
        });
        
        // ğŸ¯ STEMê¸‰ ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤ ì—°ê²° í•¨ìˆ˜ë“¤
        function generateAccessToken(subscriptionId) {
            // STEMê¸‰ ì—ì´ì „íŠ¸ ì „ìš© í† í° ìƒì„±
            const timestamp = Date.now();
            const randomId = Math.random().toString(36).substring(2, 15);
            return `stem-${subscriptionId}-${timestamp}-${randomId}`;
        }
        
        function copyToken() {
            const tokenInput = document.getElementById('accessToken');
            tokenInput.select();
            tokenInput.setSelectionRange(0, 99999); // ëª¨ë°”ì¼ìš©
            
            try {
                document.execCommand('copy');
                // ì„±ê³µ ë©”ì‹œì§€
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = 'âœ… ë³µì‚¬ë¨!';
                button.style.background = '#2ecc71';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '#4CAF50';
                }, 2000);
                
                alert('ğŸ¯ í† í°ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nSTEMê¸‰ ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤ì—ì„œ ì´ í† í°ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì„¸ìš”.');
            } catch (err) {
                // í´ë°±: ìˆ˜ë™ ë³µì‚¬ ì•ˆë‚´
                alert('í† í°ì„ ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”:\n\n' + tokenInput.value);
            }
        }
        
        function goToStemService() {
            const token = document.getElementById('accessToken').value;
            
            if (!token) {
                alert('âŒ í† í°ì´ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê²°ì œë¥¼ ë¨¼ì € ì™„ë£Œí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // í† í°ì„ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì„ì‹œ ì €ì¥ (ìë™ ë¡œê·¸ì¸ìš©)
            localStorage.setItem('stem_access_token', token);
            localStorage.setItem('stem_token_timestamp', Date.now());
            
            // STEMê¸‰ ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤ URL (í´ë¼ìš°ë“œ ë°°í¬)
            const stemServiceUrl = 'https://hyojin-stem-agents.onrender.com';  // Render ë°°í¬ ì„œë²„
            // const stemServiceUrl = 'http://localhost:5000';  // ë¡œì»¬ ê°œë°œìš©
            
            // ìƒˆ íƒ­ì—ì„œ STEM ì„œë¹„ìŠ¤ ì—´ê¸°
            const stemWindow = window.open(stemServiceUrl, '_blank');
            
            if (!stemWindow) {
                alert('íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ íŒì—…ì„ í—ˆìš©í•´ì£¼ì„¸ìš”.\n\nì§ì ‘ ì´ë™: ' + stemServiceUrl);
            } else {
                // ì„±ê³µ ë©”ì‹œì§€
                setTimeout(() => {
                    alert('ğŸ¯ STEMê¸‰ ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤ê°€ ìƒˆ íƒ­ì—ì„œ ì—´ë ¸ìŠµë‹ˆë‹¤!\n\ní† í°ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì—¬ 31ê°œ ì „ë¬¸ AIì™€ ëŒ€í™”ë¥¼ ì‹œì‘í•˜ì„¸ìš”.');
                }, 1000);
            }
        }
    </script>
</body>
</html>

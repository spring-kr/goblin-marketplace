<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🏰 도깨비마을장터 박사급 AI 상담소 🏰</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            color: white;
            min-height: 100vh;
        }
        
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .container { padding: 40px 20px; }
        .hero-section { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border-radius: 20px; padding: 40px; margin-bottom: 40px; text-align: center; border: 2px solid rgba(255, 255, 255, 0.3); }
        .hero-section h1 { font-size: 3rem; margin-bottom: 20px; text-shadow: 0 0 20px rgba(255, 255, 255, 0.5); }
        .hero-section p { font-size: 1.3rem; opacity: 0.9; }
        .card { background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(15px); border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; transition: all 0.3s ease; color: white; height: 100%; }
        .card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3); border-color: rgba(255, 215, 0, 0.8); }
        .card-body { padding: 30px; display: flex; flex-direction: column; height: 100%; }
        .card-title { font-size: 1.5rem; margin-bottom: 15px; color: #FFD700; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; padding: 12px 25px; border-radius: 8px; font-weight: bold; transition: all 0.3s ease; margin-top: auto; }
        .btn-primary:hover { transform: scale(1.05); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3); }
        .category-header { background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px); border-radius: 15px; padding: 20px; margin: 30px 0 20px 0; text-align: center; border: 2px solid rgba(255, 215, 0, 0.3); }
        .category-header h2 { color: #FFD700; margin: 0; font-size: 2rem; }
        .admin-section { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border-radius: 20px; padding: 30px; margin-top: 40px; text-align: center; }
        .btn-warning { background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%); border: none; color: #2d3436; font-weight: bold; }
        .chat-container { max-width: 800px; margin: 0 auto; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border-radius: 20px; padding: 30px; margin-top: 30px; display: none; }
        .chat-messages { max-height: 500px; overflow-y: auto; margin-bottom: 20px; padding: 20px; background: rgba(0, 0, 0, 0.1); border-radius: 15px; }
        .message { margin-bottom: 15px; padding: 15px; border-radius: 10px; }
        .user-message { background: rgba(102, 126, 234, 0.3); text-align: right; }
        .bot-message { background: rgba(35, 166, 213, 0.3); text-align: left; }
        .input-group { margin-top: 20px; }
        .form-control { background: rgba(255, 255, 255, 0.2); border: 2px solid rgba(255, 255, 255, 0.3); color: white; }
        .form-control:focus { background: rgba(255, 255, 255, 0.25); border-color: #FFD700; color: white; box-shadow: 0 0 0 0.2rem rgba(255, 215, 0, 0.25); }
        .form-control::placeholder { color: rgba(255, 255, 255, 0.7); }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero-section">
            <h1>🏰 도깨비마을장터 박사급 AI 상담소 <span style="font-size: 1.5rem; color: #FFD700; background: rgba(255, 0, 0, 0.3); padding: 5px 15px; border-radius: 20px; border: 2px solid #FFD700;">BETA</span></h1>
            <p>16개 전문 도깨비들이 각 분야별 전문 상담을 제공합니다</p>
        </div>

        <!-- 비즈니스 전문 분야 -->
        <div class="category-header">
            <h2>� 비즈니스 전문 도깨비들</h2>
        </div>
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">� 박사급 비서 도깨비</h5>
                        <p class="card-text">모든 업무를 체계적으로 관리하고 효율적인 솔루션을 제공합니다.</p>
                        <button class="btn btn-primary" onclick="startChat('assistant')">상담하기</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">💻 빌더 도깨비</h5>
                        <p class="card-text">웹사이트부터 앱까지, 모든 개발 프로젝트를 구현해드립니다.</p>
                        <button class="btn btn-primary" onclick="startChat('builder')">상담하기</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">💬 상담 도깨비</h5>
                        <p class="card-text">개인적인 고민부터 비즈니스 문제까지, 심층 상담해드립니다.</p>
                        <button class="btn btn-primary" onclick="startChat('counselor')">상담하기</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">� 창작 도깨비</h5>
                        <p class="card-text">아이디어부터 완성작까지, 모든 창작 활동을 지원합니다.</p>
                        <button class="btn btn-primary" onclick="startChat('creative')">상담하기</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 데이터 & 분석 전문 분야 -->
        <div class="category-header">
            <h2>📊 데이터 & 분석 전문 도깨비들</h2>
        </div>
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">� 데이터분석 도깨비</h5>
                        <p class="card-text">빅데이터 분석부터 예측 모델링까지, 데이터의 통찰을 제공합니다.</p>
                        <button class="btn btn-primary" onclick="startChat('data_analyst')">상담하기</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">🔮 운세 도깨비</h5>
                        <p class="card-text">타로, 사주팔자, 오늘의 운세까지 모든 점술을 제공합니다.</p>
                        <button class="btn btn-primary" onclick="startChat('fortune')">상담하기</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">🌱 성장 도깨비</h5>
                        <p class="card-text">개인 성장부터 비즈니스 성장까지, 발전 전략을 수립해드립니다.</p>
                        <button class="btn btn-primary" onclick="startChat('growth')">상담하기</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">� HR 도깨비</h5>
                        <p class="card-text">채용부터 인사관리까지, 인적자원의 모든 것을 책임집니다.</p>
                        <button class="btn btn-primary" onclick="startChat('hr')">상담하기</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 마케팅 & 영업 전문 분야 -->
        <div class="category-header">
            <h2>� 마케팅 & 영업 전문 도깨비들</h2>
        </div>
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">� 마케팅 도깨비</h5>
                        <p class="card-text">디지털 마케팅부터 브랜딩까지, 고객 유치 전략을 수립합니다.</p>
                        <button class="btn btn-primary" onclick="startChat('marketing')">상담하기</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">🏥 의료 도깨비</h5>
                        <p class="card-text">의학 지식과 건강 상담의 전문가, 건강을 지켜드립니다.</p>
                        <button class="btn btn-primary" onclick="startChat('medical')">상담하기</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">💰 영업 도깨비</h5>
                        <p class="card-text">세일즈 전략부터 고객 관리까지, 매출 증대를 도와드립니다.</p>
                        <button class="btn btn-primary" onclick="startChat('sales')">상담하기</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">🔍 SEO 도깨비</h5>
                        <p class="card-text">검색엔진 최적화의 달인, 온라인 가시성을 높여드립니다.</p>
                        <button class="btn btn-primary" onclick="startChat('seo')">상담하기</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 특수 서비스 전문 분야 -->
        <div class="category-header">
            <h2>🌟 특수 서비스 전문 도깨비들</h2>
        </div>
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">🛒 쇼핑 도깨비</h5>
                        <p class="card-text">최적의 상품 선택부터 가격 비교까지, 스마트 쇼핑을 도와드립니다.</p>
                        <button class="btn btn-primary" onclick="startChat('shopping')">상담하기</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">🚀 스타트업 도깨비</h5>
                        <p class="card-text">창업부터 투자유치까지, 스타트업의 모든 단계를 지원합니다.</p>
                        <button class="btn btn-primary" onclick="startChat('startup')">상담하기</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">� 이장 도깨비</h5>
                        <p class="card-text">도깨비마을의 최고 관리자, 모든 도깨비들을 총괄합니다.</p>
                        <button class="btn btn-primary" onclick="startChat('village_chief')">상담하기</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">✍️ 박사급 문서 작성 도깨비</h5>
                        <p class="card-text">논문부터 보고서까지, 전문적인 문서 작성을 도와드립니다.</p>
                        <button class="btn btn-primary" onclick="startChat('writing')">상담하기</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 채팅 컨테이너 -->
        <div class="chat-container" id="chatContainer">
            <h3 id="chatTitle">도깨비와 대화하기</h3>
            <div class="chat-messages" id="chatMessages"></div>
            <div class="input-group">
                <input type="text" class="form-control" id="userInput" placeholder="질문을 입력하세요...">
                <button class="btn btn-primary" onclick="sendMessage()">전송</button>
                <button class="btn btn-warning" onclick="closeChat()">닫기</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentAgent = '';

        function startChat(agentType) {
            currentAgent = agentType;
            const chatContainer = document.getElementById('chatContainer');
            const chatTitle = document.getElementById('chatTitle');
            const chatMessages = document.getElementById('chatMessages');
            
            // 채팅창 초기화
            chatMessages.innerHTML = '';
            chatContainer.style.display = 'block';
            
            // 제목 설정
            const agentNames = {
                assistant: '� 박사급 비서 도깨비',
                data_analyst: '📊 박사급 데이터 분석 도깨비',
                creative: '🎨 박사급 창의 도깨비',
                hr: '👥 박사급 인사 도깨비',
                marketing: '📈 박사급 마케팅 도깨비',
                sales: '� 박사급 영업 도깨비',
                builder: '🏗️ 박사급 개발 도깨비',
                counselor: '🧠 박사급 상담 도깨비',
                fortune: '� 박사급 운세 도깨비',
                growth: '� 박사급 성장 도깨비',
                seo: '� 박사급 SEO 도깨비',
                shopping: '🛒 박사급 쇼핑몰 도깨비',
                startup: '🚀 박사급 창업 도깨비',
                medical: '⚕️ 박사급 의료 도깨비',
                village_chief: '👑 박사급 촌장 도깨비',
                writing: '✍️ 박사급 글쓰기 도깨비'
            };
            
            chatTitle.textContent = agentNames[agentType] + '와 대화하기';
            
            // 환영 메시지
            addMessage('bot', `안녕하세요! ${agentNames[agentType]}입니다. 무엇을 도와드릴까요?`);
            
            // 스크롤
            chatContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function sendMessage() {
            const userInput = document.getElementById('userInput');
            const message = userInput.value.trim();
            
            if (message === '') return;
            
            addMessage('user', message);
            userInput.value = '';
            
            // API 호출
            fetch('/chat', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    agent_type: currentAgent,
                    message: message
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.response) {
                    addMessage('bot', `${data.agent_emoji} ${data.agent_name}: ${data.response}`);
                } else {
                    addMessage('bot', '죄송합니다. 응답을 받을 수 없습니다.');
                }
            })
            .catch(error => {
                addMessage('bot', '서버 연결에 문제가 있습니다.');
                console.error('Error:', error);
            });
        }

        function addMessage(sender, message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ' + (sender === 'user' ? 'user-message' : 'bot-message');
            messageDiv.textContent = message;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function closeChat() {
            document.getElementById('chatContainer').style.display = 'none';
        }

        // 관리자 대시보드 접근 기능 (Ctrl+Shift+A)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                e.preventDefault();
                openAdminDashboard();
            }
        });

        function openAdminDashboard() {
            const authCode = prompt('관리자 인증 코드를 입력하세요:');
            
            // 인증 코드 확인 (실제 환경에서는 서버 검증 필요)
            const validCodes = ['ADM***', 'GOB***', 'HYO***']; // 보안상 일부 마스킹
            
            if (authCode && authCode.length >= 8) {
                // 실제로는 서버에서 해시 검증해야 함
                window.open('/admin-dashboard?auth=' + btoa(authCode), '_blank');
            } else if (authCode !== null) {
                alert('잘못된 인증 코드입니다.');
            }
        }

        // Enter 키로 메시지 전송
        document.getElementById('userInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>

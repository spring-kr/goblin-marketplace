<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>16ëª… ë°•ì‚¬ê¸‰ ë„ê¹¨ë¹„ ì „ë¬¸ê°€ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .experts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .expert-card {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.3);
        }
        .expert-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .expert-emoji {
            font-size: 2em;
            margin-right: 10px;
        }
        .expert-name {
            font-size: 1.2em;
            font-weight: bold;
        }
        .test-section {
            margin-bottom: 15px;
        }
        input, button, textarea {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: none;
            border-radius: 5px;
            font-size: 14px;
        }
        button {
            background: #4CAF50;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background: #45a049;
        }
        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
        .response-area {
            background: rgba(0,0,0,0.2);
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            min-height: 100px;
            font-size: 12px;
            overflow-y: auto;
            max-height: 200px;
        }
        .status {
            text-align: center;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .test-all-btn {
            background: #FF6B6B;
            font-size: 1.2em;
            padding: 15px;
            margin: 20px 0;
        }
        .test-all-btn:hover {
            background: #FF5252;
        }
        .loading {
            color: #FFA726;
        }
        .success {
            color: #66BB6A;
        }
        .error {
            color: #EF5350;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§ª 16ëª… ë°•ì‚¬ê¸‰ ë„ê¹¨ë¹„ ì „ë¬¸ê°€ ëŠ¥ë ¥ í…ŒìŠ¤íŠ¸</h1>
            <p>ì‹¤ì œ AI ëª¨ë¸ ì—°ë™ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ê° ì „ë¬¸ê°€ì˜ ëŠ¥ë ¥ì„ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”!</p>
        </div>

        <div class="status" id="status">
            <div>ğŸ” ì„œë²„ ìƒíƒœ í™•ì¸ ì¤‘...</div>
        </div>

        <button class="test-all-btn" onclick="testAllExperts()">
            ğŸš€ ì „ì²´ ì „ë¬¸ê°€ ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        </button>

        <div class="experts-grid" id="expertsGrid">
            <!-- ì „ë¬¸ê°€ ì¹´ë“œë“¤ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>
    </div>

    <script>
        const experts = {
            "medical": { name: "ì˜í•™ë°•ì‚¬ í•˜ì´ì§„", emoji: "ğŸ¥", test: "ê°ê¸° ì¦ìƒì´ ì¼ì£¼ì¼ì§¸ ì§€ì†ë˜ê³  ìˆì–´ìš”" },
            "financial": { name: "ê²½ì œí•™ë°•ì‚¬ ë¶€ìì§„", emoji: "ğŸ’°", test: "20ëŒ€ ì§ì¥ì¸ íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ì²œí•´ì£¼ì„¸ìš”" },
            "legal": { name: "ë²•í•™ë°•ì‚¬ ì •ì˜ì§„", emoji: "âš–ï¸", test: "ì„ëŒ€ì°¨ ê³„ì•½ ì¤‘ ë³´ì¦ê¸ˆ ë°˜í™˜ ë¬¸ì œê°€ ìˆì–´ìš”" },
            "tech": { name: "ê³µí•™ë°•ì‚¬ í…Œí¬ì§„", emoji: "ğŸ”§", test: "ìŠ¤íƒ€íŠ¸ì—…ì—ì„œ ì‚¬ìš©í•  ê¸°ìˆ  ìŠ¤íƒ ì¶”ì²œí•´ì£¼ì„¸ìš”" },
            "creative": { name: "ì˜ˆìˆ í•™ë°•ì‚¬ ì°½ì¡°ì§„", emoji: "ğŸ¨", test: "ë¸Œëœë“œ ë¡œê³  ë””ìì¸ ì»¨ì…‰ì„ ì¡ê³  ìˆì–´ìš”" },
            "marketing": { name: "ë§ˆì¼€íŒ…ë°•ì‚¬ íŒë§¤ì§„", emoji: "ğŸ“ˆ", test: "ì‹ ì œí’ˆ ëŸ°ì¹­ ë§ˆì¼€íŒ… ì „ëµì„ ì„¸ìš°ê³  ìˆì–´ìš”" },
            "education": { name: "êµìœ¡í•™ë°•ì‚¬ ê°€ë¥´ì¹¨ì§„", emoji: "ğŸ“š", test: "ì„±ì¸ í•™ìŠµìë¥¼ ìœ„í•œ íš¨ê³¼ì ì¸ êµìœ¡ ë°©ë²•ì€?" },
            "hr": { name: "ì¸ì‚¬ê´€ë¦¬ë°•ì‚¬ ì¸ì¬ì§„", emoji: "ğŸ‘¥", test: "ì›ê²©ê·¼ë¬´ ì‹œëŒ€ì˜ íŒ€ ê´€ë¦¬ ë°©ë²•ì€?" },
            "sales": { name: "ì˜ì—…ì „ëµë°•ì‚¬ ì„±ê³¼ì§„", emoji: "ğŸ’¼", test: "B2B ì˜ì—…ì—ì„œ ì²« ë¯¸íŒ… ì„±ê³µë¥ ì„ ë†’ì´ë ¤ë©´?" },
            "research": { name: "ì—°êµ¬ê°œë°œë°•ì‚¬ í˜ì‹ ì§„", emoji: "ğŸ”¬", test: "R&D í”„ë¡œì íŠ¸ ê´€ë¦¬ ë°©ë²•ë¡  ì¶”ì²œí•´ì£¼ì„¸ìš”" },
            "translation": { name: "ì–¸ì–´í•™ë°•ì‚¬ ë²ˆì—­ì§„", emoji: "ğŸŒ", test: "ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì•½ì„œ ë²ˆì—­ ì‹œ ì£¼ì˜ì‚¬í•­ì€?" },
            "consulting": { name: "ê²½ì˜ì»¨ì„¤íŒ…ë°•ì‚¬ ì „ëµì§„", emoji: "ğŸ¯", test: "ì¤‘ì†Œê¸°ì—… ë””ì§€í„¸ ì „í™˜ ë¡œë“œë§µ ìˆ˜ë¦½í•˜ë ¤ë©´?" },
            "psychology": { name: "ì‹¬ë¦¬í•™ë°•ì‚¬ ë§ˆìŒì§„", emoji: "ğŸ§ ", test: "ì§ì¥ì—ì„œ ë²ˆì•„ì›ƒì„ ê²ªê³  ìˆì–´ìš”" },
            "data": { name: "ë°ì´í„°ê³¼í•™ë°•ì‚¬ ë¶„ì„ì§„", emoji: "ğŸ“Š", test: "ê³ ê° ì´íƒˆ ì˜ˆì¸¡ ëª¨ë¸ì„ êµ¬ì¶•í•˜ë ¤ê³  í•´ìš”" },
            "startup": { name: "ì°½ì—…í•™ë°•ì‚¬ ìŠ¤íƒ€íŠ¸ì§„", emoji: "ğŸš€", test: "ì•„ì´ë””ì–´ëŠ” ìˆëŠ”ë° ì°½ì—… ì²« ë‹¨ê³„ê°€ ê¶ê¸ˆí•´ìš”" },
            "wellness": { name: "ì›°ë‹ˆìŠ¤ë°•ì‚¬ ê±´ê°•ì§„", emoji: "ğŸŒ¿", test: "ì—…ë¬´ ìŠ¤íŠ¸ë ˆìŠ¤ë¡œ ì¸í•œ ë¶ˆë©´ì¦ í•´ê²°ë²•ì€?" }
        };

        let testResults = {};

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            checkServerStatus();
            createExpertCards();
        });

        async function checkServerStatus() {
            try {
                const response = await fetch('http://localhost:8005/ai_status');
                const status = await response.json();
                
                const statusDiv = document.getElementById('status');
                if (response.ok) {
                    statusDiv.innerHTML = `
                        <div class="success">âœ… ì„œë²„ ì—°ê²° ì„±ê³µ!</div>
                        <div>AI í™œì„±í™”: ${status.ai_enabled ? 'âœ…' : 'âŒ'}</div>
                        <div>ì‚¬ìš© ê°€ëŠ¥í•œ API: ${status.available_apis.join(', ') || 'ì—†ìŒ'}</div>
                    `;
                } else {
                    statusDiv.innerHTML = '<div class="error">âŒ ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜</div>';
                }
            } catch (error) {
                document.getElementById('status').innerHTML = 
                    '<div class="error">âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨ - http://localhost:8005ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš”</div>';
            }
        }

        function createExpertCards() {
            const grid = document.getElementById('expertsGrid');
            
            Object.entries(experts).forEach(([type, expert]) => {
                const card = document.createElement('div');
                card.className = 'expert-card';
                card.innerHTML = `
                    <div class="expert-header">
                        <span class="expert-emoji">${expert.emoji}</span>
                        <span class="expert-name">${expert.name}</span>
                    </div>
                    <div class="test-section">
                        <input type="text" id="input-${type}" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..." value="${expert.test}">
                        <button onclick="testExpert('${type}')" id="btn-${type}">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
                    </div>
                    <div class="response-area" id="response-${type}">
                        ì—¬ê¸°ì— ì‘ë‹µì´ í‘œì‹œë©ë‹ˆë‹¤...
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        async function testExpert(agentType) {
            const inputElement = document.getElementById(`input-${agentType}`);
            const buttonElement = document.getElementById(`btn-${agentType}`);
            const responseElement = document.getElementById(`response-${agentType}`);
            
            const message = inputElement.value.trim();
            if (!message) {
                alert('ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }

            buttonElement.disabled = true;
            buttonElement.textContent = 'í…ŒìŠ¤íŠ¸ ì¤‘...';
            responseElement.innerHTML = '<div class="loading">ğŸ”„ AI ì‘ë‹µ ìƒì„± ì¤‘...</div>';

            try {
                const response = await fetch('http://localhost:8005/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        agent_type: agentType,
                        message: message
                    })
                });

                const result = await response.json();
                
                if (response.ok) {
                    const responseText = result.response || 'ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.';
                    responseElement.innerHTML = `
                        <div class="success">âœ… ì‘ë‹µ ì™„ë£Œ (${responseText.length}ì)</div>
                        <div style="margin-top: 10px; font-size: 13px; line-height: 1.4;">
                            ${responseText.replace(/\n/g, '<br>')}
                        </div>
                    `;
                    
                    // í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì €ì¥
                    testResults[agentType] = {
                        question: message,
                        response: responseText,
                        success: true,
                        timestamp: new Date().toISOString()
                    };
                } else {
                    responseElement.innerHTML = `
                        <div class="error">âŒ ì˜¤ë¥˜ ë°œìƒ</div>
                        <div>${result.detail || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}</div>
                    `;
                }
            } catch (error) {
                responseElement.innerHTML = `
                    <div class="error">âŒ ì—°ê²° ì˜¤ë¥˜</div>
                    <div>${error.message}</div>
                `;
            } finally {
                buttonElement.disabled = false;
                buttonElement.textContent = 'í…ŒìŠ¤íŠ¸ ì‹¤í–‰';
            }
        }

        async function testAllExperts() {
            const button = document.querySelector('.test-all-btn');
            button.disabled = true;
            button.textContent = 'ğŸ”„ ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘...';
            
            let successCount = 0;
            const totalCount = Object.keys(experts).length;
            
            for (const [type, expert] of Object.entries(experts)) {
                await testExpert(type);
                await new Promise(resolve => setTimeout(resolve, 2000)); // 2ì´ˆ ëŒ€ê¸°
                
                if (testResults[type] && testResults[type].success) {
                    successCount++;
                }
                
                button.textContent = `ğŸ”„ í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘... (${successCount}/${totalCount})`;
            }
            
            button.disabled = false;
            button.textContent = `âœ… ì „ì²´ í…ŒìŠ¤íŠ¸ ì™„ë£Œ! (${successCount}/${totalCount} ì„±ê³µ)`;
            
            // ê²°ê³¼ ìš”ì•½ í‘œì‹œ
            setTimeout(() => {
                alert(`ğŸ‰ ì „ì²´ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!\nì„±ê³µ: ${successCount}/${totalCount}\nì„±ê³µë¥ : ${Math.round(successCount/totalCount*100)}%`);
                button.textContent = 'ğŸš€ ì „ì²´ ì „ë¬¸ê°€ ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰';
            }, 1000);
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ° ë„ê¹¨ë¹„ë§ˆì„ì¥í„° ë°•ì‚¬ê¸‰ AI ìƒë‹´ì†Œ ğŸ°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            color: white;
            min-height: 100vh;
        }
        
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .container {
            padding: 40px 20px;
        }
        
        .hero-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .hero-section h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }
        
        .hero-section p {
            font-size: 1.3rem;
            opacity: 0.9;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            transition: all 0.3s ease;
            color: white;
            height: 100%;
        }
        
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 215, 0, 0.8);
        }
        
        .card-body {
            padding: 30px;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .card-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #FFD700;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-top: auto;
        }
        
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .category-header {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0 20px 0;
            text-align: center;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }
        
        .category-header h2 {
            color: #FFD700;
            margin: 0;
            font-size: 2rem;
        }
        
        .admin-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-top: 40px;
            text-align: center;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            border: none;
            color: #2d3436;
            font-weight: bold;
        }
        
        .chat-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            display: none;
        }
        
        .chat-messages {
            max-height: 500px;
            overflow-y: auto;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 15px;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 10px;
        }
        
        .user-message {
            background: rgba(102, 126, 234, 0.3);
            text-align: right;
        }
        
        .bot-message {
            background: rgba(35, 166, 213, 0.3);
            text-align: left;
        }
        
        .input-group {
            margin-top: 20px;
        }
        
        .form-control {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
        }
        
        .form-control:focus {
            background: rgba(255, 255, 255, 0.25);
            border-color: #FFD700;
            color: white;
            box-shadow: 0 0 0 0.2rem rgba(255, 215, 0, 0.25);
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        /* Beta í‘œì‹œ ìŠ¤íƒ€ì¼ */
        .beta-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin-left: 10px;
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 0.9rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            color: #FFD700;
            background: rgba(255, 215, 0, 0.15);
            border: 1px solid rgba(255, 215, 0, 0.55);
        }
        .beta-note {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 12px;
            border-radius: 10px;
            font-size: 0.95rem;
            color: #ffffff;
            background: rgba(255, 215, 0, 0.12);
            border: 1px solid rgba(255, 215, 0, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- íˆì–´ë¡œ ì„¹ì…˜ -->
        <div class="hero-section">
            <h1>ğŸ° ë„ê¹¨ë¹„ë§ˆì„ì¥í„° ë°•ì‚¬ê¸‰ AI ìƒë‹´ì†Œ <span class="beta-badge" title="ë² íƒ€ ë²„ì „">BETA</span></h1>
            <p>ì›ë˜ 16ê°œ ë„ê¹¨ë¹„ë“¤ì´ ê° ë¶„ì•¼ë³„ ì „ë¬¸ ìƒë‹´ì„ ì œê³µí•©ë‹ˆë‹¤</p>
            <p><strong>âœ¨ ë°•ì‚¬ê¸‰ AI ë„ê¹¨ë¹„ë“¤ì˜ ì „ë¬¸ì ì¸ ì¡°ì–¸ì„ ë°›ì•„ë³´ì„¸ìš”! âœ¨</strong></p>
            <p class="beta-note">í˜„ì¬ ë² íƒ€(ì‹œí—˜ ìš´ì˜) ë²„ì „ì…ë‹ˆë‹¤. ê¸°ëŠ¥ì´ ë³€ê²½ë˜ê±°ë‚˜ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <!-- ì—…ë¬´&ê´€ë¦¬ ì¹´í…Œê³ ë¦¬ -->
        <div class="category-header">
            <h2>ğŸ’¼ ì—…ë¬´&ê´€ë¦¬ ì „ë¬¸ ë„ê¹¨ë¹„</h2>
        </div>
        <div class="row">
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ¤– ë°•ì‚¬ê¸‰ ë¹„ì„œ ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ì—…ë¬´ ê´€ë¦¬, ì¼ì • ê³„íš, ìƒì‚°ì„± í–¥ìƒ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('assistant', 'ğŸ¤– ë°•ì‚¬ê¸‰ ë¹„ì„œ ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ‘¥ HR ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ì¸ì‚¬ ê´€ë¦¬, ì¡°ì§ ìš´ì˜, íŒ€ ë¹Œë”© ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('hr', 'ğŸ‘¥ HR ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ‘‘ ì´ì¥ ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ë§ˆì„ ê´€ë¦¬, ì»¤ë®¤ë‹ˆí‹° ìš´ì˜, ë¦¬ë”ì‹­ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('village_chief', 'ğŸ‘‘ ì´ì¥ ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸŒ± ì„±ì¥ ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ê°œì¸ ì„±ì¥, ì—­ëŸ‰ ê°œë°œ, ìê¸°ê³„ë°œ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('growth', 'ğŸŒ± ì„±ì¥ ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì°½ì‘&ë§ˆì¼€íŒ… ì¹´í…Œê³ ë¦¬ -->
        <div class="category-header">
            <h2>ğŸ¨ ì°½ì‘&ë§ˆì¼€íŒ… ì „ë¬¸ ë„ê¹¨ë¹„</h2>
        </div>
        <div class="row">
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ¨ ì°½ì‘ ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ì°½ì˜ì  ì•„ì´ë””ì–´, ì½˜í…ì¸  ì œì‘, ì˜ˆìˆ  ì°½ì‘ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('creative', 'ğŸ¨ ì°½ì‘ ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ“ˆ ë§ˆì¼€íŒ… ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ë§ˆì¼€íŒ… ì „ëµ, ë¸Œëœë”©, ê³ ê° ë¶„ì„ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('marketing', 'ğŸ“ˆ ë§ˆì¼€íŒ… ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">âœï¸ ë°•ì‚¬ê¸‰ ë¬¸ì„œ ì‘ì„± ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ì „ë¬¸ ë¬¸ì„œ ì‘ì„±, ë³´ê³ ì„œ, ì œì•ˆì„œ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('writing', 'âœï¸ ë°•ì‚¬ê¸‰ ë¬¸ì„œ ì‘ì„± ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ” SEO ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ê²€ìƒ‰ ìµœì í™”, ì›¹ ë§ˆì¼€íŒ…, íŠ¸ë˜í”½ ì¦ëŒ€ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('seo', 'ğŸ” SEO ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ê¸°ìˆ &ë¶„ì„ ì¹´í…Œê³ ë¦¬ -->
        <div class="category-header">
            <h2>ğŸ’» ê¸°ìˆ &ë¶„ì„ ì „ë¬¸ ë„ê¹¨ë¹„</h2>
        </div>
        <div class="row">
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ’» ë¹Œë” ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ, ì‹œìŠ¤í…œ êµ¬ì¶•, ê¸°ìˆ  ì„¤ê³„ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('builder', 'ğŸ’» ë¹Œë” ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ“Š ë°ì´í„°ë¶„ì„ ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ë°ì´í„° ë¶„ì„, í†µê³„, ì˜ˆì¸¡ ëª¨ë¸ë§ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('data_analyst', 'ğŸ“Š ë°ì´í„°ë¶„ì„ ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ¥ ì˜ë£Œ ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ê±´ê°• ê´€ë¦¬, ì˜í•™ ì •ë³´, ì›°ë¹™ ë¼ì´í”„ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('medical', 'ğŸ¥ ì˜ë£Œ ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸš€ ìŠ¤íƒ€íŠ¸ì—… ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ì°½ì—… ì „ëµ, ì‚¬ì—… ê³„íš, íˆ¬ì ìœ ì¹˜ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('startup', 'ğŸš€ ìŠ¤íƒ€íŠ¸ì—… ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ìƒí™œ&ìƒë‹´ ì¹´í…Œê³ ë¦¬ -->
        <div class="category-header">
            <h2>ğŸ’¬ ìƒí™œ&ìƒë‹´ ì „ë¬¸ ë„ê¹¨ë¹„</h2>
        </div>
        <div class="row">
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ’¬ ìƒë‹´ ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ì‹¬ë¦¬ ìƒë‹´, ê³ ë¯¼ í•´ê²°, ë©˜íƒˆ ì¼€ì–´ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('counselor', 'ğŸ’¬ ìƒë‹´ ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ”® ìš´ì„¸ ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ìš´ì„¸ í•´ì„, íƒ€ë¡œ, ì¸ìƒ ì¡°ì–¸ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('fortune', 'ğŸ”® ìš´ì„¸ ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ’° ì˜ì—… ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ì˜ì—… ì „ëµ, ì„¸ì¼ì¦ˆ ìŠ¤í‚¬, ê³ ê° ê´€ë¦¬ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('sales', 'ğŸ’° ì˜ì—… ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ›’ ì‡¼í•‘ ë„ê¹¨ë¹„</h5>
                        <p class="card-text">ìŠ¤ë§ˆíŠ¸ ì‡¼í•‘, ì œí’ˆ ì¶”ì²œ, êµ¬ë§¤ ê°€ì´ë“œ ì „ë¬¸ê°€</p>
                        <button class="btn btn-primary" onclick="startChat('shopping', 'ğŸ›’ ì‡¼í•‘ ë„ê¹¨ë¹„')">ìƒë‹´ ì‹œì‘</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì±„íŒ… ì»¨í…Œì´ë„ˆ -->
        <div class="chat-container" id="chatContainer">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 id="currentAgent">ë„ê¹¨ë¹„ì™€ ëŒ€í™”ì¤‘...</h3>
                <button class="btn btn-secondary" onclick="closeChat()">ëŒ€í™” ì¢…ë£Œ</button>
            </div>
            <div class="chat-messages" id="chatMessages"></div>
            <div class="input-group">
                <input type="text" class="form-control" id="questionInput" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..." onkeypress="handleKeyPress(event)">
                <button class="btn btn-primary" onclick="sendMessage()">ì „ì†¡</button>
            </div>
        </div>
    </div>

    <!-- ê´€ë¦¬ì ë¡œê·¸ì¸ ëª¨ë‹¬ -->
    <div class="modal fade" id="adminModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content" style="background: rgba(255, 255, 255, 0.95); color: #333;">
                <div class="modal-header">
                    <h5 class="modal-title">ê´€ë¦¬ì ì¸ì¦</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="adminForm" onsubmit="checkAdminKey(); return false;">
                        <div class="mb-3">
                            <label for="adminKey" class="form-label">ê´€ë¦¬ì í‚¤:</label>
                            <input type="password" class="form-control" id="adminKey" style="color: #333;" placeholder="ê´€ë¦¬ì í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”" autocomplete="new-password" onkeypress="if(event.key==='Enter') checkAdminKey()">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ì·¨ì†Œ</button>
                    <button type="button" class="btn btn-primary" onclick="checkAdminKey()">í™•ì¸</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentAgentType = '';
        let currentAgentName = '';
        
        // ë¹„ë°€ ê´€ë¦¬ì ì ‘ê·¼ ì½”ë“œ - Ctrl + Shift + A
        document.addEventListener('keydown', function(event) {
            // Ctrl + Shift + A ì¡°í•© ê°ì§€ (ëŒ€/ì†Œë¬¸ì ëª¨ë‘ í—ˆìš©)
            if (event.ctrlKey && event.shiftKey && (event.key === 'A' || event.key === 'a')) {
                event.preventDefault(); // ê¸°ë³¸ ë™ì‘ ë°©ì§€

                // ê´€ë¦¬ì ë¡œê·¸ì¸ ëª¨ë‹¬ í‘œì‹œ
                const modal = new bootstrap.Modal(document.getElementById('adminModal'));
                modal.show();

                // ì•Œë¦¼ í† ìŠ¤íŠ¸
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed; top: 20px; right: 20px; z-index: 10000;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white; padding: 15px 25px; border-radius: 10px;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                    font-weight: bold; animation: fadeInOut 3s forwards;
                `;
                notification.innerHTML = 'ğŸ” ê´€ë¦¬ì ì¸ì¦ ëª¨ë“œ';
                document.body.appendChild(notification);

                setTimeout(() => notification.remove(), 2000);
            }
        });
        
        // CSS ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInOut {
                0% { opacity: 0; transform: translateX(100px); }
                20%, 80% { opacity: 1; transform: translateX(0); }
                100% { opacity: 0; transform: translateX(100px); }
            }
        `;
        document.head.appendChild(style);

        function startChat(agentType, agentName) {
            currentAgentType = agentType;
            currentAgentName = agentName;
            
            document.getElementById('currentAgent').textContent = agentName + 'ì™€ ëŒ€í™”ì¤‘...';
            document.getElementById('chatContainer').style.display = 'block';
            document.getElementById('chatMessages').innerHTML = '';
            document.getElementById('questionInput').value = '';
            
            // í™˜ì˜ ë©”ì‹œì§€ ì¶”ê°€
            addMessage('bot', `ì•ˆë…•í•˜ì„¸ìš”! ${agentName}ì…ë‹ˆë‹¤. ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?`);
            
            // ì±„íŒ… ì˜ì—­ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            document.getElementById('chatContainer').scrollIntoView({ behavior: 'smooth' });
        }

        function closeChat() {
            document.getElementById('chatContainer').style.display = 'none';
            currentAgentType = '';
            currentAgentName = '';
        }

        function addMessage(type, content) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}-message`;
            messageDiv.innerHTML = content.replace(/\n/g, '<br>');
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        async function sendMessage() {
            const input = document.getElementById('questionInput');
            const question = input.value.trim();
            
            if (!question) {
                alert('ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!currentAgentType) {
                alert('ë„ê¹¨ë¹„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
            addMessage('user', question);
            input.value = '';

            try {
                const response = await fetch('/stem/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        question: question,
                        agent_type: currentAgentType
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    addMessage('bot', data.response);
                } else {
                    addMessage('bot', 'âŒ ì˜¤ë¥˜: ' + (data.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'));
                }
            } catch (error) {
                console.error('Error:', error);
                addMessage('bot', 'âŒ ì„œë²„ ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        async function checkAdminKey() {
            const adminKey = document.getElementById('adminKey').value;
            
            if (!adminKey) {
                alert('ê´€ë¦¬ì í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            try {
                const response = await fetch('/stem/stats', {
                    method: 'GET',
                    headers: {
                        'X-Admin-Key': adminKey
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    const modal = bootstrap.Modal.getInstance(document.getElementById('adminModal'));
                    modal.hide();
                    showStats(data);
                } else {
                    alert('ì˜ëª»ëœ ê´€ë¦¬ì í‚¤ì…ë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('ì„œë²„ ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function showStats(data) {
            const statsWindow = window.open('', '_blank', 'width=800,height=600');
            statsWindow.document.write(`
                <html>
                <head>
                    <title>ë„ê¹¨ë¹„ë§ˆì„ì¥í„° í†µê³„</title>
                    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
                    <style>
                        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; }
                        .card { background: rgba(255,255,255,0.1); border: none; margin-bottom: 20px; }
                        .card-body { color: white; }
                        .table { color: white; }
                    </style>
                </head>
                <body>
                    <div class="container">
                        <h1>ğŸ“Š ë„ê¹¨ë¹„ë§ˆì„ì¥í„° í†µê³„</h1>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-body">
                                        <h5>ì´ ì§ˆë¬¸ ìˆ˜</h5>
                                        <h2>${data.total_questions}</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-body">
                                        <h5>ì„±ê³µ ì‘ë‹µ</h5>
                                        <h2>${data.successful_responses}</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-body">
                                        <h5>ì„±ê³µë¥ </h5>
                                        <h2>${data.success_rate}%</h2>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <h5>ë„ê¹¨ë¹„ë³„ ì‚¬ìš©ëŸ‰</h5>
                                <table class="table">
                                    <thead>
                                        <tr><th>ë„ê¹¨ë¹„</th><th>ì‚¬ìš© íšŸìˆ˜</th></tr>
                                    </thead>
                                    <tbody>
                                        ${Object.entries(data.agent_usage).map(([agent, count]) => 
                                            `<tr><td>${agent}</td><td>${count}</td></tr>`
                                        ).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <h5>ìµœê·¼ í™œë™</h5>
                                <div style="max-height: 300px; overflow-y: auto;">
                                    ${data.recent_activity.map(activity => 
                                        `<div class="border-bottom py-2">
                                            <strong>${activity.agent_type}</strong> - ${activity.timestamp}<br>
                                            <small>${activity.question.substring(0, 100)}...</small>
                                        </div>`
                                    ).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                </body>
                </html>
            `);
        }
    </script>
</body>
</html>
